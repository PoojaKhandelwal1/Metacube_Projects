angular.module("ui.date",[]).constant("uiDateConfig",{}).directive("uiDate",["uiDateConfig","uiDateConverter",function(a,b){"use strict";var c;return c={},angular.extend(c,a),{require:"?ngModel",link:function(c,d,e,f){var g=function(){return angular.extend({},a,c.$eval(e.uiDate))},h=function(){var a=!1,h=g();if(f){var i=h.onSelect||angular.noop;h.onSelect=function(b,e){c.$apply(function(){a=!0,f.$setViewValue(d.datepicker("getDate")),i(b,e),d.blur()})};var j=h.beforeShow||angular.noop;h.beforeShow=function(b,c){a=!0,j(b,c)};var k=h.onClose||angular.noop;h.onClose=function(b,c){a=!1,k(b,c)},d.off("blur.datepicker").on("blur.datepicker",function(){a||c.$apply(function(){d.datepicker("setDate",d.datepicker("getDate")),f.$setViewValue(d.datepicker("getDate"))})}),f.$render=function(){var a=f.$modelValue;if(angular.isDefined(a)&&null!==a&&!angular.isDate(a)){if(!angular.isString(f.$modelValue))throw new Error("ng-Model value must be a Date, or a String object with a date formatter - currently it is a "+typeof a+" - use ui-date-format to convert it from a string");a=b.stringToDate(e.uiDateFormat,f.$modelValue)}d.datepicker("setDate",a)}}d.data("datepicker")?(d.datepicker("option",h),d.datepicker("refresh")):(d.datepicker(h),d.on("$destroy",function(){d.datepicker("destroy")})),f&&f.$render()};c.$watch(g,h,!0)}}}]).factory("uiDateConverter",["uiDateFormatConfig",function(a){function b(b,c){if(b=b||a,c){if(b)return jQuery.datepicker.formatDate(b,c);if(c.toISOString)return c.toISOString()}return null}function c(b,c){if(b=b||a,angular.isString(c)){if(b)return jQuery.datepicker.parseDate(b,c);var d=new Date(c);return isNaN(d.getTime())?null:d}return null}return{stringToDate:c,dateToString:b}}]).constant("uiDateFormatConfig","").directive("uiDateFormat",["uiDateConverter",function(a){var b={require:"ngModel",link:function(b,c,d,e){var f=d.uiDateFormat;e.$formatters.unshift(function(b){return a.stringToDate(f,b)}),e.$parsers.push(function(b){return a.dateToString(f,b)})}};return b}]);