<apex:page standardStylesheets="false" showChat="false" showHeader="false" sidebar="false" docType="html-5.0"  controller="GlobalController">
        <!-- <apex:stylesheet value="{!Application}/css/AddEditUnit.css"/> -->
  <div>
   	<route-loading-indicator></route-loading-indicator>
   	<div ng-if="!isRouteLoading" ng-cloak="ng-cloak"> 
    <div id="AddNewCOU" class="modal fade AddNewCOU">
       <div class="modal-dialog" ng-init="COUModal.LoadCustomerInfoDetail()" ng-class="{'edit_modal-dialog' : COUModal.ownedUnitRec.Id != null}" >
          <div class="modal-content">
             <div class="modal-body popup_container">
                <div class="popupinside">
                   <div class="popupleft col-md-5 col-lg-5 existing_COU" ng-show = "COUModal.ownedUnitRec.Id == null">
                      <div class="popupleft_container">
                         <h1 class="letpanel_heading">
                            {{ 'Label_Existing' | translate }} {{ 'Similar_units' | translate }}:
                         </h1>
                         <i class="fa fa-question-circle helptip" style=" float:left; font-weight: bold; color: #B7BEC6;  margin-top: 20px; margin-bottom: 10px;   font-size: 20px;"></i>
                         <div class="goldbox exists col-lg-12 col-md-12 couSimilar P0"  ng-repeat="SimilarCOU in  COUModal.SimilarCOU" ng-show="COUModal.SimilarCOU.length != 0">
                            <div class="pull-left">
                                 <img class="hideoverflow" src="{!Application_Images}/UnitImage.png" width="80px" height="119px" />
                                 <!-- <div class="sprite UnitImage"></div> -->
                            </div>
                            <div class="rightgoldbox type2 unitDetails">
                                <p class="cust_name address">
                                    <p class = "T3 bp-word-break-all bp-lh-15" ng-if = "SimilarCOU.VIN != null">{{SimilarCOU.VIN}}</p>
                                    <p class = "vinUnknown " ng-if = "SimilarCOU.VIN == null ">{{'VIN_unknown'| translate }}</p>
                                   <p class = "T3 col-md-11 texttype col-md-offset-1 P0"> {{SimilarCOU.UnitType}}: <span class = "blue_Text">{{SimilarCOU.UniqueId}}</span></p>
                                   <p class = "T3 col-md-12 P0"><span class = " col-md-6 P0 T3" title = "{{SimilarCOU.MakeName}}">{{SimilarCOU.MakeName}}</span> <span class = "pull-right text-center col-md-5 P0 T3" title = "{{SimilarCOU.Year}}">{{SimilarCOU.Year}}</span> </p>
                                   <p class = "T3 col-md-12 P0"><span class = " col-md-6 P0 T3" title = "{{SimilarCOU.ModelName}}">{{SimilarCOU.ModelName}}</span>  <span class = "pull-right  text-center col-md-5 P0 T3" title = "{{SimilarCOU.Color}}">{{SimilarCOU.Color}}</span></p>
                                   <p class = "T3 col-md-12 P0 lastPtag"><span class = "col-md-6 P0 T3" title = "{{SimilarCOU.SubModelName}}">{{SimilarCOU.SubModelName}}</span>  
                                        <span class="Active_Button_row pull-right col-md-5 P0">
                                         <button class="col-md-12  T4  round_btn " ng-class="{ redColorBg: SimilarCOU.StatusColor=='Red' ,  C10: SimilarCOU.StatusColor=='Green', C5: SimilarCOU.StatusColor=='Black' }" >{{SimilarCOU.Status}}</button> 
                                        </span>
                                   </p>
                                   
                                </p>
                            </div>
                            
                            
                         </div>
                      </div>
                   </div>
                   <div class="popupright addunitWrapper " ng-class="{'col-md-7 col-md-7': COUModal.ownedUnitRec.Id == null , 'leftBorderNone col-md-12 col-md-12': COUModal.ownedUnitRec.Id != null}">
                      <div class="right_heading_container col-lg-12 col-md-12">

                         <h1 class="right_panel_heading" ng-show="COUModal.ownedUnitRec.Id == null && (COUModal.ownedUnitRec.UnitType == 'COU' || COUModal.ownedUnitRec.UnitType == undefined)">
                         {{ 'Label_Add' | translate }} {{ 'Customer_Owned_Unit_Object_Display_Label' | translate }} </h1><!-- Edited by kajal - 11/16/2016 - #1291 -->
                         <!-- START: Added by kajal - 11/16/2016 - #1291 -->
                         <h1 class="right_panel_heading" ng-if="COUModal.ownedUnitRec.Id == null && COUModal.ownedUnitRec.UnitType == 'STOCK' ">{{ 'Label_Add' | translate }} Stock Unit</h1>
                         <h1 class="right_panel_heading" ng-if="COUModal.ownedUnitRec.Id == null && COUModal.ownedUnitRec.UnitType == 'ORDU' ">{{ 'Label_Add' | translate }} On Order Unit</h1>
                         <!-- END: Added by kajal - 11/16/2016 - #1291 -->
                         <h1 class="right_panel_heading" ng-if="COUModal.ownedUnitRec.Id != null && COUModal.ownedUnitRec.UnitType == 'COU' ">{{ 'Edit_Label' | translate }} {{ 'Customer_Owned_Unit_Object_Display_Label' | translate }}</h1>
                         <h1 class="right_panel_heading" ng-if="COUModal.ownedUnitRec.Id != null && COUModal.ownedUnitRec.UnitType == 'STOCK' ">{{ 'Edit_Label' | translate }} Stock Unit</h1>
                         <h1 class="right_panel_heading" ng-if="COUModal.ownedUnitRec.Id != null && COUModal.ownedUnitRec.UnitType == 'ORDU' ">{{ 'Edit_Label' | translate }} On Order Unit</h1>
                         <div class="savecancle_btncntnr">
                            <button type="button" id="closemodal" class="btn btn-default grayBtn" ng-click="COUModal.CancelCOUForm()">{{ 'Cancel_Label' | translate }}</button>
                            <button type="button" class="btn btn-default greenBtn" 
							ng-disabled="COUModal.disableSaveButton" ng-click="COUModal.SaveCOUForm()">{{ 'Save_Label' | translate }}</button> <!-- ng-disabled Added by richa 21/01/2017 for disabling button after one click -->
                         </div>
                      </div>
                      <div class="tabconainer noborder addCOUWrapper" style="border-top: 1px solid #cccccc;">
                         <form>
                            <div class="option_field" ng-if = "COUModal.ownedUnitRec.Id != null && COUModal.ownedUnitRec.UnitType == 'COU'"><!-- EDited by kajal 11/22/2016 -->
                               <div class="form_fields pull-left ">


                                  <div class="form-group large">
                                     <label for="exampleInputEmail1" class="control-label">{{'Unit_ID'| translate }} </label>
                                     <p  class=" T2">{{COUModal.ownedUnitRec.UnitId}} </p>








                                  </div>
                               </div>
                               <div class=" controls"  id="UnitID">
                                   <i class="fa fa-question-circle" data-toggle="tooltip" title="{{'Helptext_add_vehicle_unitId_number_unit'| translate }}"></i>
                                   <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('UnitId','UnitId')" ></i>
                               </div>
                             </div>
                         
                         
                             <div class="option_field">
                               <div class="form_fields pull-left ">
                                  <div class="form-group large vin-loading-icon"  ng-class="{'required' : COUModal.ownedUnitRec.UnitType == 'STOCK' || COUModal.ownedUnitRec.UnitType == 'ORDU' }" >
                                     <label for="exampleInputEmail1" class="control-label">{{'Label_VIN'| translate }}</label>
                                     <input type="text" class="form-control textfielduserinput smallForm-control" id="VINFieldId" 
                                            ng-model="COUModal.ownedUnitRec.VIN" 
                                            ng-blur="COUModal.OnBlurVin('VIN')" rel="VINId"
                                            ng-class="{'redborder' : COUModal.COUFormValidationModal['VIN'].isError == true}" 
                                            data-toggle="tooltip" 
                                            title="{{(COUModal.COUFormValidationModal['VIN'].isError == true && (COUModal.ownedUnitRec.UnitType == 'STOCK' || COUModal.ownedUnitRec.UnitType == 'ORDU')) ? COUModal.COUFormValidationModal['VIN']['ErrorMessage']:''}}" 
                                            maxlength="40"
                                            ng-focus="COUModal.formFieldJustGotFocus('VINId')"
                                            ng-keydown="COUModal.keydownForVIN($event)"/>  
										 <i class="input-loading-icon" ng-if="COUModal.vehicleSpecificationsResult == 'Loading'">
											      	<svg class="input-spiner" width="85px" height="85px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
													   <circle class="input-spiner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle>
													</svg>
	                                       		</i>
                                  </div>
                                  </div>
                                    <div class=" controls"  id="VINId">
                                        <i class="fa fa-question-circle" data-toggle="tooltip" title="Add Vehicle Identification Number of the Unit"></i>
                                        <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('VIN','VINId'); COUModal.vehicleSpecificationsResult = ''" ></i>
                                    </div>
                                  </div>
                                  
                                 <div class="option_field" ng-class = "{'no-margin-top': COUModal.vehicleSpecificationsResult == 'Match not found'}"  ng-if="COUModal.ownedUnitRec.UnitType == 'COU' && COUModal.vehicleSpecificationsResult == 'Match found' || COUModal.vehicleSpecificationsResult == 'Match not found'">
	                               <div class="form_fields pull-left">
	                                  <div class="form-group large">
	                                     <label for="exampleInputEmail1" class="control-label"></label>
	                                     <div class="smallForm-control pull-left" ng-if="COUModal.vehicleSpecificationsResult == 'Match found'">
	                                        <label class="sub-item-label bp-font-14">{{ 'Vehicle_lookup_information' | translate }}:</label>
	                                        <div class="col-xs-12 P0 pull-left">
	                                            <info-card-component id-value="couInfoCardEditId"
	                                              object-payload="COUModal.unitCardInfoPayload"
	                                              button-action="COUModal.setDataFromBRP()">
	                                           </info-card-component>
	                                        </div>
	                                    </div>
	                                    <div class="smallForm-control pull-left result-text" ng-if="COUModal.vehicleSpecificationsResult == 'Match not found'">
	                                        <span class="result-text-label bp-font-14">{{ 'No_BRP_match_found' | translate }}</span>
	                                    </div>
	                                  </div>
                                    </div>
                                  </div>
                                 <div class="option_field">
                                 <div class="form_fields pull-left ">
                                 <div class="form-group large required">
                                    <label for="exampleInputEmail1"  class="control-label">{{ 'Make_Object_Display_Label' | translate }}</label>
                                        <div class="dropdown selectDropbox">
                                          <input type="text" class="form-control " placeholder="{{'Label_Search'| translate }}" rel="customerUnitMakeSelectedId"
                                                    ng-model="COUModal.FilterSearchMake"  
                                                    ng-keyup="COUModal.ChangeSeletedUnitMake($event)"  
                                                    ng-focus="COUModal.getUnitmakeList($event)" 
                                                    ng-blur ="COUModal.saveUnitMake($event)"
                                                    ng-class="{'redborder' : COUModal.COUFormValidationModal['MakeName'].isError == true}"
                                                    />
                                                    
                                           <!-- <button class="btn dropdown-toggle" type="button"   ng-class="{'redborder' : COUModal.COUFormValidationModal['Make'].isError == true}" data-toggle="dropdown"
                                            ng-click="COUModal.getUnitmakeList($event)"> {{COUModal.UnitMakeSelected.UnitMakeName}}
                                            <span ng-if="COUModal.UnitMakeSelected.UnitMakeName == null || COUModal.UnitMakeSelected.UnitMakeName == ''">Unit Make</span>
                                            
                                          <span class="caret"></span></button> -->
                                          <ul class="dropdown-menu keep_open" style="overflow: visible;">  
                                            <div class="right-inner-addon" style="margin: 10px;">
                                               <!--  <input type="text" class="form-control" placeholder="Search" rel="customerUnitMakeSelectedId"
                                                    ng-model="COUModal.FilterSearchMake" ng-keydown="COUModal.ChangeSeletedUnitMake($event)" /> -->
                                            </div>
                                            <div class="column_fixHeight" id="TypeFixedHeight"> 
                                            <li ng-if="(COUModal.UnitMake | filter:COUModal.FilterSearchMake).length == 0" class="noMatchesFound">
                                            	<span>{{'No_matches'| translate }}</span></li><!-- Added by kajal - 02/20/2017 -->
                                            <li ng-if="(COUModal.UnitMake | filter:COUModal.FilterSearchMake).length > 0 && make.UnitMakeName" 
                                            	ng-repeat="make in COUModal.filteredItemsMake = (COUModal.UnitMake | CustomMakeSort : COUModal.FilterSearchMake : 'make' )"
                                            	ng-class="{'angucomplete-selected-row': $index == COUModal.CurrentIndexMake }"   
                                            	ng-mousedown="COUModal.changeUnitMake(make,$event)" >
                                                <a >{{make.UnitMakeName}}</a> <!-- ng-if="filteredItemsMake.length > 0" -->
                                            </li> 
                                           </div> 
                                          </ul>
                                    </div>
                                  </div>
                                 </div>
                                 
                                   <div class=" controls" id="customerUnitMakeSelectedId">
                                       <i class="fa fa-question-circle" data-toggle="tooltip" title="Select Make  of the Unit"></i>
                                       <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('MakeName','customerUnitMakeSelectedId')" ></i>
                                 </div>
                                  </div>
                                 <div class="option_field">  
                                   <div class="form_fields pull-left ">        
                                  <div class="form-group large required">
                                     <label for="exampleInputEmail1"  class="control-label">{{ 'Model_Object_Display_Label' | translate }}</label>
                                     <div class="dropdown selectDropbox">
                                          <input type="text" class="form-control" placeholder="{{'Label_Search'| translate }}" rel="customerUnitMainModelId"
                                                    ng-model="COUModal.FilterSearchUnitModel"  
                                                    ng-keyup="COUModal.ChangeSeletedUnitModel($event)"  
                                                    ng-focus="COUModal.getUnitModelList($event)" 
                                                    ng-blur ="COUModal.saveUnitModel($event)"
                                                    ng-class="{'redborder' : COUModal.COUFormValidationModal['ModelName'].isError == true}"/>
                                                      
                                          <!-- <button class="btn dropdown-toggle" type="button" data-toggle="dropdown"  ng-class="{'redborder' : COUModal.COUFormValidationModal['Model'].isError == true}"
                                           > {{}}
                                            <span ng-if="COUModal.UnitModelSelected.UnitModelName == null || COUModal.UnitModelSelected.UnitModelName == ''">Unit Model</span>
                                          <span class="caret"></span></button>
                                           -->
                                          <ul class="dropdown-menu keep_open" style="overflow: visible;"> 
                                            <div class="right-inner-addon" style="margin: 10px;">
                                            </div>
                                            <div class="column_fixHeight" id="TypeFixedHeight">
                                            <li ng-if="(COUModal.UnitModel | filter:COUModal.FilterSearchUnitModel).length == 0 && model.UnitModelName" class="noMatchesFound">
                                            	<span>{{'No_matches'| translate }}</span></li><!-- Added by kajal - 02/20/2017 -->
                                            <li ng-if="(COUModal.UnitModel | filter:COUModal.FilterSearchUnitModel).length > 0"
                                            	ng-repeat="model in COUModal.filteredItemsUnitModel =(COUModal.UnitModel | CustomMakeSort : COUModal.FilterSearchUnitModel : 'model')"  
                                            	ng-class="{'angucomplete-selected-row': $index == COUModal.CurrentIndexUnitModel}" 
                                            	ng-mousedown="COUModal.changeUnitmodel(model,$event)" >
                                                <a>{{model.UnitModelName}}</a> 
                                            </li> 
                                           </div> 
                                          </ul>
                                    </div>
                                  </div>
                                  </div>    
                                 <div class=" controls" id="customerUnitMainModelId">
                                       <i class="fa fa-question-circle" data-toggle="tooltip" title="Select Model of the Unit"></i>
                                       <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('ModelName','customerUnitMainModelId')"></i>
                                 </div>
                                 </div>
                                <!--  <div class="option_field">  
                                  <div class="form_fields pull-left ">    
                                   <div class="form-group large">
                                     <label for="exampleInputEmail1">{{ 'Sub_Model_Object_Display_Label' | translate }}</label>
                                     <input type="text" class="form-control smallForm-control textfielduserinput" ng-model="COUModal.ownedUnitRec.SubModelName" ng-disabled="true"/>
                                  </div>
                                 </div>
                                 </div> -->
                                   <!-- Added by Subhrant -->
                                   <div class="option_field">  
                                   <div class="form_fields pull-left ">        
                                   <div class="form-group large">
                                   
                                   
                                   
                                     <label for="exampleInputEmail1"  class="control-label">{{ 'Sub_Model_Object_Display_Label' | translate }}</label>
                                       <div class="dropdown selectDropbox">
                                      <input type="text" class="form-control " placeholder="{{'Label_Search'| translate }}" rel="customerSubModelId"
                                                    ng-model="COUModal.FilterSearchUnitSubModel"  
                                                    ng-keyup="COUModal.ChangeSeletedUnitSubModel($event)" 
                                                    ng-focus="COUModal.getUnitSubModelList($event)" 
                                                    ng-blur ="COUModal.saveUnitSubModel($event)"/><!-- ng-model="COUModal.filteredItemsUnitSubModel" ng-model="COUModal.FilterSearchUnitSubModel" ?? edited by kv 02/12/2017 -->
                                                    
                                          <!-- <button class="btn dropdown-toggle" type="button" data-toggle="dropdown"
                                            ng-click="COUModal.getUnitSubModelList($event)"> {{COUModal.UnitSubModelSelected.SubModelName}}
                                            <span ng-if="COUModal.UnitSubModelSelected.SubModelName == null || COUModal.UnitSubModelSelected.SubModelName == ''">Unit Sub Model</span><!-- Edited by kajal 11/22/2016 --> 
                                         <!--  <span class="caret"></span></button> -->
                                          <ul class="dropdown-menu keep_open" style="overflow: visible;"> 
                                            <div class="right-inner-addon" style="margin: 10px;">
                                            </div>  
                                            <div class="column_fixHeight" id="TypeFixedHeight">
                                            <li ng-if="(COUModal.UnitSubModel | filter:COUModal.FilterSearchUnitSubModel).length == 0" class="noMatchesFound">
                                            	<span>{{'No_matches'| translate }}</span></li><!-- Added by kajal - 02/20/2017 -->
                                            <li ng-if="(COUModal.UnitSubModel | filter:COUModal.FilterSearchUnitSubModel).length > 0 && model.SubModelName"
                                            	ng-repeat="model in COUModal.filteredItemsUnitSubModel = (COUModal.UnitSubModel | CustomMakeSort : COUModal.FilterSearchUnitSubModel : 'submodel')" 
                                            	ng-class="{'angucomplete-selected-row': $index == COUModal.CurrentIndexUnitSubModel}" 
                                            	ng-mousedown="COUModal.changeUnitSubmodel(model,$event)" >
                                                <a  >{{ model.SubModelName}}</a> 
                                            </li> 
                                           </div> 
                                          </ul>
                                    </div>
                                      
                                   </div>
                                   </div>   
                                   <div class=" controls" id="customerSubModelId"> <!-- id Changed by richa customerUnitMainModelId -> customerSubModelId #116 PE 27/09/2016 -->
                                        <i class="fa fa-question-circle" data-toggle="tooltip" title="Select SubModel of the Unit"></i> <!-- title Changed by richa Model -> SubModel #116 PE 27/09/2016 -->
                                        <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('SubModelName','customerSubModelId')"></i> <!-- ng-click parameter Changed by richa ModelName, customerUnitMainModelId #116 PE 27/09/2016 -->
                                  </div>
                                  </div>
                                  <!-- Added by Subhrant -->
                                 <div class="option_field" ng-if = "COUModal.ownedUnitRec.MakeModelDescription != null">
                                    <div class="form_fields pull-left ">      
                                     <div class="form-group large">
                                     <label for="exampleInputEmail1"> </label>
                                     <span class = "T3">{{COUModal.ownedUnitRec.MakeModelDescription}}</span>
                                  </div>
                                  </div>
                               </div>                              
                                 <div class="option_field"> 
                                  <div class="form_fields pull-left ">     
                                  <div class="form-group large">
                                     <label for="exampleInputEmail1">{{ 'Label_Year' | translate }}</label>
                                     <select class="form-control haff-form-control" placeholder="{{'Label_Year'| translate }}" rel="customerUnitMainyearMakeId" ng-change="COUModal.changeYear()" ng-model="COUModal.UnitYearSelected"
                                             ng-options="i as i.year for i in COUModal.Years track by i.year" ng-focus="COUModal.formFieldJustGotFocus('customerUnitMainyearMakeId')" >
                                     </select>
                                  </div>
                                  </div>
                                  <div class=" controls" id="customerUnitMainyearMakeId">
                                        <i class="fa fa-question-circle"  data-toggle="tooltip" title="Select Year  of the Unit"></i>
                                        <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('Year','customerUnitMainyearMakeId')"></i>
                                    </div>  
                                   </div>
                                    <div class="option_field"  ng-if = "COUModal.ownedUnitRec.UnitType == 'ORDU' || COUModal.ownedUnitRec.UnitType == 'STOCK' ">
                                        <div class="form_fields pull-left ">      
                                             <div class="form-group large">
                                             <label for="exampleInputEmail1">{{'New_unit'| translate }}</label>
                                              <p class="checkbox">
                                                    <span id="sameAsBA"
                                                    class="chk_tick"
                                                    ng-click = "COUModal.gearNewUnit()"
                                                    ng-class="{'chked' : COUModal.ownedUnitRec.IsNewUnit}"  rel="customerUnitMainNewUnitcId">
                                                    
                                                    <i class="fa fa-check-square chksqure"></i>
                                                    </span>
                                            </p>
                                          </div>
                                      </div>
                                   <div class=" controls" id="customerUnitMainNewUnitcId">
                                        <i class="fa fa-question-circle"   data-toggle="tooltip" title="Add New Unit of the Unit" ></i>
                                        <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('IsNewUnit','customerUnitMainNewUnitcId')"></i>
                                  </div> 
                                </div>
                                 <div class="option_field">
                                    <div class="form_fields pull-left ">      
                                     <div class="form-group large">
                                     <label for="exampleInputEmail1">{{'Exterior_colour_Label'| translate }}</label>
                                     <input type="text" class="form-control smallForm-control textfielduserinput" 
                                     ng-focus="COUModal.formFieldJustGotFocus('customerUnitMainExteriorColourId')"  maxlength="20" ng-model="COUModal.ownedUnitRec.Color" rel="customerUnitMainExteriorColourId"/>
                                  </div>
                                  </div>
                                  <div class=" controls" id="customerUnitMainExteriorColourId">
                                        <i class="fa fa-question-circle"   data-toggle="tooltip" title="Add Colour of the Unit" ></i>
                                        <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('Color','customerUnitMainExteriorColourId')"></i>
                                  </div>
                               </div>
                                
                                <div class="option_field" ng-if = "(COUModal.ownedUnitRec.UnitType == 'ORDU' || COUModal.ownedUnitRec.UnitType == 'STOCK')">
                                	<div class="form_fields pull-left ">      
                                     	<div class="form-group large">
                                     		<label for="exampleInputEmail1">{{'Stock_no'| translate }}</label>
                                    		<input type="text" class="form-control smallForm-control textfielduserinput" ng-focus="COUModal.formFieldJustGotFocus('unitStockId')"  maxlength="20" ng-model="COUModal.ownedUnitRec.StockId" rel="unitStockId" ng-if="COUModal.ownedUnitRec.UnitType == 'STOCK'" />
                                    		<input type="text" class="form-control smallForm-control textfielduserinput" ng-focus="COUModal.formFieldJustGotFocus('unitStockId')"  maxlength="20" ng-model="COUModal.ownedUnitRec.UnitId" rel="unitStockId" ng-if="COUModal.ownedUnitRec.UnitType == 'ORDU'" />
                                  		</div>
                                  	</div>
                                  	<div class="controls" id="unitStockId">
                                    	<i class="fa fa-question-circle" data-toggle="tooltip" title="Add Stock of the Unit" ></i>
                                        <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('StockId','unitStockId')" ng-if="COUModal.ownedUnitRec.UnitType == 'STOCK'"></i>
                                        <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('UnitId','unitStockId')" ng-if="COUModal.ownedUnitRec.UnitType == 'ORDU'"></i>
                                  	</div>
                               	</div>
                                
                                <div class="option_field"  ng-show = "COUModal.ownedUnitRec.UnitType == 'ORDU' ">
                                        <div class="form_fields pull-left ">      
                                             <div class="form-group large">
                                             <label for="exampleInputEmail1">{{'Factory_Order'| translate }}</label>
                                             <input type="text" maxlength="20" class="form-control smallForm-control textfielduserinput"
                                             ng-focus="COUModal.formFieldJustGotFocus('customerUnitMainFactoryOrderId')"    ng-model="COUModal.ownedUnitRec.FactoryOrderNo" rel="customerUnitMainFactoryOrderId"/>
                                          </div>
                                      </div>
                                  <div class=" controls" id="customerUnitMainFactoryOrderId">
                                        <i class="fa fa-question-circle"   data-toggle="tooltip" title="Add Factory Order of the Unit" ></i>
                                        <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('FactoryOrderNo','customerUnitMainFactoryOrderId')"></i>
                                  </div>
                               </div>
                                 <div class="option_field" ng-if = "COUModal.ownedUnitRec.UnitType == 'COU' || COUModal.ownedUnitRec.UnitType == null"> 
                                    <div class="form_fields pull-left ">     
                                      <div class="form-group large">
                                         <label for="exampleInputEmail1">{{ 'Plate_reg' | translate }}</label>
                                         <input type="text" class="form-control smallForm-control textfielduserinput"
                                         ng-focus="COUModal.formFieldJustGotFocus('customerUnitMainLisenseId')"   ng-blur="COUModal.OnBlurVin('Plate')" ng-model="COUModal.ownedUnitRec.Plate" maxlength="20" rel="customerUnitMainLisenseId"/>
                                      </div>
                                      </div>
                                      <div class=" controls" id="customerUnitMainLisenseId">
                                             <i class="fa fa-question-circle"  data-toggle="tooltip" title="Add License PLate Number of the Unit"></i>
                                             <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('Plate','customerUnitMainLisenseId')"></i>
                                      </div>
                                    </div>
                                     <!-- START: added by kajal 1st may, 2017 #1975 --> 
                                 <div class="option_field" ng-if = "COUModal.ownedUnitRec.UnitType == 'COU' || COUModal.ownedUnitRec.UnitType == null"> 
                                 	<div class="form_fields pull-left ">     
                                      <div class="form-group large">
                                      
                                         <label for="exampleInputEmail1">{{'Reg_Expiry_Date'| translate }}</label>
                                         <input type="text" 
                                                style="background: #FFF;" 
                                                ui-date="COUModal.dateOptionsForRegExpiryDate"
                                                ui-date-format="{{COUModal.DateFormat}}" 
                                                class="form-control smallForm-control datepicker"
                                                ng-model="COUModal.ownedUnitRec.RegExpiryDate" 
                                                ng-change="" 
                                                rel="customerUnitRegExpiryDate"
                                                id = "customerUnitRegExpiryDateOption"
                                                readonly="readonly"  ng-focus="COUModal.formFieldJustGotFocus('customerUnitRegExpiryDate')"/> 
                                          <span class="input-group-addon btn" style="cursor:pointer; position: absolute;right: 9%;top: 18%; padding: 0;font-size: 18px;">
                                                            <span class="glyphicon glyphicon-calendar" ng-click = "COUModal.showCalendar('customerUnitRegExpiryDateOption')"></span>
                                                </span> 
                                      </div>
                                      </div>
                                      <div class=" controls" id="customerUnitRegExpiryDate">
                                             <i class="fa fa-question-circle"  data-toggle="tooltip" title="Add Reg Expiry Date of the Unit"></i>
                                             <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('RegExpiryDate','customerUnitRegExpiryDate')"></i>
                                      </div>
                                 </div>
                                 <!-- END: added by kajal 1st may, 2017 #1975 --> 
                                      <div class="option_field" ng-if = "COUModal.ownedUnitRec.UnitType == 'COU' || COUModal.ownedUnitRec.UnitType == null "> 
                                 <div class="form_fields pull-left ">     
                                  <div class="form-group large">
                                     <label for="exampleInputEmail1">{{ 'Label_Mileage' | translate }}</label>
                                     
                                     <!-- <input type="text" class="number form-control  haff-form-control textfielduserinput" 
                                        ng-blur="COUModal.OnBlurMileage();"
                                        maxlength="6"
                                        ng-class="{'redborder' : COUModal.COUFormValidationModal['Mileage']['isError'] == true}"
                                        ng-model = "COUModal.ownedUnitRec.Mileage" rel="customerUnitMainMilageId"/> -->
                                        
                                        <price-only-input id-value = "Mileage"
                                                              class-value = "form-control haff-form-control"
                                                              max-length = "6" 
                                                              precision-length = "1" 
                                                              input-value = "COUModal.ownedUnitRec.Mileage"
                                                              input-model = "COUModal" 
                                                              rel-value = "customerUnitMainMilageId"
                                                              ng-blur="COUModal.OnBlurMileage();"
                                                              validation-modal = "COUModal.COUFormValidationModal"
                                                              validation-modal-key = "Mileage"
                                                              />
                                                              
                                                              <!-- tab-index = "{{VendorContactModal.tabIndexValue + 4}}" 
                                                              place-holder-value = "{!$ObjectType.Contact.fields.Extension__c.label}" -->
                                        
                                       <label for="Mileage" class = "mileageSection">Mileage Type</label>
                                       <select class="form-control small-haff-form-control" placeholder="{{'Label_Mileage'| translate }}"  ng-model="COUModal.ownedUnitRec.MileageType"
                                             ng-options="i.Value as i.Value for i in COUModal.MileageList">
                                     </select>  
                                  </div>
                                  </div>
                                  
                                  <div class=" controls" id="customerUnitMainMilageId">
                                        <i class="fa fa-question-circle" data-toggle="tooltip" title="Add Mileage of the Unit"></i>
                                        <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('Mileage','customerUnitMainMilageId')" ></i>
                                  </div>
                           </div>
                            <div class="option_field"  ng-show="COUModal.AdditionalFieldsInfo.Category.isPrimary">
                                        <div class="form_fields pull-left ">      
                                             <div class="form-group large">  
                                              <label for="exampleInputEmail1">{{'Category_Object_Display_Label'| translate }}</label>

                                              <!-- Dinesh Kumar--> 
                                              <autocompleteold id="CategoryId"
                                                              rel-value="customerUnitMainCategoryId"
                                                              placeholder="{{ 'Category_Object_Display_Label' | translate }}" 
                                                              type="{{ 'Category_Object_Display_Label' | translate }}" 
                                                              titlefield="Name"
                                                              typesearchmodal="COUModal.CategoryNameStr"
                                                              filter-param = "COUModal.CategoryFieldsFilter.UnitCategory"/>
                                           <!--    <autocomplete  id="Category" 
                                                            rel-value="categoryId" 
                                                            placeholder="{{ 'Category_Object_Display_Label' | translate }}"
                                                            type="{{ 'Category_Object_Display_Label' | translate }}" 
                                                            titlefield="Name" 
                                                            validationkey="CategoryId" 
                                                            typesearchmodal="COUModal.ownedUnitRec.Category"
                                                            filter-param="COUModal.CouFieldsFilter.CouCategory"
                                                            rel="customerUnitMainCategoryId"
                                                            /> -->
                                              
                                              
                                             <!-- <input type="text" class="form-control smallForm-control"  ng-model="COUModal.ownedUnitRec.Category" rel="customerUnitMainCategoryId"/> -->
                                          </div>
                                      </div>
                                  <div class=" controls" id="customerUnitMainCategoryId">
                                        <i class="fa fa-question-circle"   data-toggle="tooltip" title="Add Category of the Unit" ></i>
                                          <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('Category','customerUnitMainCategoryId')"></i>
                                  </div>
                               </div>
                               
                             <div class="option_field"  ng-show="COUModal.AdditionalFieldsInfo.Cylinders.isPrimary">
                                        <div class="form_fields pull-left ">      
                                             <div class="form-group large">
                                             <label for="exampleInputEmail1">{{'Cylinders'| translate }}</label>
                                <!-- <input type="text" class="number form-control textfielduserinput haff-form-control" 
                                    ng-model = "COUModal.ownedUnitRec.Cylinders" maxlength="2" rel="customerUnitMainCylindersId"/> -->  
                                    
                                    <price-only-input id-value = "CylindersId"
                                                              class-value = "form-control haff-form-control textfielduserinput"
                                                              max-length = "2" 
                                                              precision-length = "-1" 
                                                              input-value = "COUModal.ownedUnitRec.Cylinders"
                                                              input-model = "COUModal" 
                                                              rel-value = "customerUnitMainCylindersId"
                                                              validation-modal = "COUModal.COUFormValidationModal"
                                                              validation-modal-key = "Cylinders"
                                                              />
                                                              
                                        </div>
                                      </div>
                                  <div class=" controls" id="customerUnitMainCylindersId">
                                        <i class="fa fa-question-circle"   data-toggle="tooltip" title="Add Cylinders of the Unit" ></i>
                                        <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('Cylinders','customerUnitMainCylindersId')"></i>
                                  </div>
                               </div>
                               <div class="option_field"  ng-show="COUModal.AdditionalFieldsInfo.DateIn.isPrimary">
                                        <div class="form_fields pull-left ">      
                                             <div class="form-group large" ng-class="{'required' : COUModal.ownedUnitRec.UnitType == 'STOCK'}">
                                             <label for="exampleInputEmail1" ng-class="{'control-label' : COUModal.ownedUnitRec.UnitType == 'STOCK'}">{{'Date_stocked_in'| translate }}</label>
                                              <input type="text" 
                                                style="background: #FFF;" 
                                              ui-date="COUModal.dateOptions3"
                                                ui-date-format="{{COUModal.DateFormat}}" 
                                                class="form-control smallForm-control datepicker"
                                                ng-model="COUModal.ownedUnitRec.DateIn" 
                                                ng-change="COUModal.maxDateCalculation(); " 
                                                rel="customerUnitMainDateInId"
                                                readonly="readonly"
                                                ng-focus="COUModal.formFieldJustGotFocus('customerUnitMainDateInId')" 
                                                ng-blur="COUModal.OnBlurDateIn('DateIn');"
                                                id = "customerOwnUnitDateStockedIn"
                                                ng-class="{'redborder' : COUModal.COUFormValidationModal['DateIn'].isError == true}"/>   <!-- Edited by kajal 11/22/2016 -->
                                                <span class="input-group-addon btn" style="cursor:pointer; position: absolute;right: 9%;top: 18%; padding: 0;font-size: 18px;">
                                                            <span class="glyphicon glyphicon-calendar" ng-click = "COUModal.showCalendar('customerOwnUnitDateStockedIn')"></span>
                                                </span> 
                                          </div>
                                      </div>
                                  <div class=" controls" id="customerUnitMainDateInId">
                                        <i class="fa fa-question-circle"   data-toggle="tooltip" title="Add DateIn of the Unit" ></i>
                                        <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('DateIn','customerUnitMainDateInId')"></i>
                                  </div>
                               </div>
                               <div class="option_field"  ng-show="COUModal.AdditionalFieldsInfo.DateOut.isPrimary">
                                        <div class="form_fields pull-left ">      
                                             <div class="form-group large">
                                             <label for="exampleInputEmail1">{{'Date_stocked_out'| translate }}</label>

                                              <input type="text" 
                                                ui-date="COUModal.dateOptions5" 
                                                ui-date-format="{{COUModal.DateFormat}}" 
                                                Id = "dateOut" 
                                                class="form-control smallForm-control datepicker"
                                                ng-model="COUModal.ownedUnitRec.DateOut" 
												 ng-focus="COUModal.formFieldJustGotFocus('customerUnitMainDateOutId')" 
                                                ng-change="" 
                                                rel="customerUnitMainDateOutId" 
                                                readonly="readonly"
                                                style="background: #FFF;"
                                                ng-disabled="COUModal.ownedUnitRec.UnitType == 'STOCK'" 
                                                ng-class="{'disabledField': COUModal.ownedUnitRec.UnitType == 'STOCK'}"/> <!-- Edited by kajal 11/22/2016 --> <!-- ng-class Added by richa #1946 -->
                                          <span class="input-group-addon btn" style="cursor:pointer; position: absolute;right: 9%;top: 18%; padding: 0;font-size: 18px;"
                                          ng-class="{'disabledField': COUModal.ownedUnitRec.UnitType == 'STOCK'}"><!-- ng-class Added by richa #1946 -->
                                                            <span class="glyphicon glyphicon-calendar" ng-click = "COUModal.showCalendar('dateOut')"></span>
                                                </span> 
                                          </div>
                                      </div>
                                  <div class=" controls" id="customerUnitMainDateOutId">
                                        <i class="fa fa-question-circle"   data-toggle="tooltip" title="Add DateOut of the Unit" ></i>
                                        <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('DateOut','customerUnitMainDateOutId')"></i>
                                  </div>
                               </div>
                               
                                <div class="option_field"  ng-show="COUModal.AdditionalFieldsInfo.Displacement.isPrimary">
                                        <div class="form_fields pull-left ">      
                                             <div class="form-group large">
                                             <label for="exampleInputEmail1">{{'Displacement'| translate }}</label>
                                              <!-- <number-only-input-cou  id-value = "Cylinders"  class-value = "form-control smallForm-control"
                                                    rel-value="customerUnitMainDisplacementId"
                                                                            input-value="COUModal.ownedUnitRec.Displacement"
                                                                            precision-length = "2"/> -->
                                                                            
                                            <!-- <input type="text" maxlength="6" class="number form-control  haff-form-control textfielduserinput" 
                                            ng-model = "COUModal.ownedUnitRec.Displacement" rel="customerUnitMainDisplacementId"/>   -->    
                                            
                                            <price-only-input id-value = "DisplacementId"
                                                              class-value = "form-control haff-form-control textfielduserinput"
                                                              max-length = "6" 
                                                              precision-length = "-1" 
                                                              input-value = "COUModal.ownedUnitRec.Displacement"
                                                              input-model = "COUModal" 
                                                              rel-value = "customerUnitMainDisplacementId"
                                                              validation-modal = "COUModal.COUFormValidationModal"
                                                              validation-modal-key = "Displacement"
                                                              />                        
                                          </div>
                                      </div>
                                  <div class=" controls" id="customerUnitMainDisplacementId">
                                        <i class="fa fa-question-circle"   data-toggle="tooltip" title="Add Displacement of the Unit" ></i>
                                        <i class="fa fa-times"  ng-click="COUModal.ClearAndRemoveField('Displacement','customerUnitMainDisplacementId')"></i>
                                  </div>
                               </div>  
                                 <div class="option_field"  ng-show="COUModal.AdditionalFieldsInfo.EngineSerialNo.isPrimary">
                                        <div class="form_fields pull-left ">      
                                             <div class="form-group large">
                                             <label for="exampleInputEmail1">{{'Engine_serial_no'| translate }}</label>
                                             <input type="text" maxlength="40"
                                             ng-focus="COUModal.formFieldJustGotFocus('customerUnitMainEnginSerialId')" id = "EnginSerialId"   class="form-control textfielduserinput smallForm-control" ng-blur="COUModal.OnBlurVin('Engine')" ng-model="COUModal.ownedUnitRec.EngineSerialNo" rel="customerUnitMainEnginSerialId"/>
                                          </div>
                                      </div>
                                  <div class=" controls" id="customerUnitMainEnginSerialId">
                                        <i class="fa fa-question-circle"   data-toggle="tooltip" title="Add Engine Serial # of the Unit" ></i>
                                        <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('EngineSerialNo','customerUnitMainEnginSerialId')"></i>
                                  </div>
                               </div>
                               
                                  <div class="option_field"  ng-show="COUModal.AdditionalFieldsInfo.InteriorColour.isPrimary">
                                        <div class="form_fields pull-left ">      
                                             <div class="form-group large">
                                             <label for="exampleInputEmail1">{{'Interior_colour_Label'| translate }}</label>
                                             <input type="text" maxlength="20" 
                                             ng-focus="COUModal.formFieldJustGotFocus('customerUnitMainInteriorColorId')" id = "InteriorColourId" class="form-control smallForm-control textfielduserinput"  ng-model="COUModal.ownedUnitRec.InteriorColour" rel="customerUnitMainInteriorColorId"/>
                                          </div>
                                      </div>
                                  <div class=" controls" id="customerUnitMainInteriorColorId">
                                        <i class="fa fa-question-circle"   data-toggle="tooltip" title="Add Interior Colour of the Unit" ></i>
                                        <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('InteriorColour','customerUnitMainInteriorColorId')"></i>
                                  </div>
                               </div>
                               
                                 <div class="option_field"  ng-show="COUModal.AdditionalFieldsInfo.IsAutomatic.isPrimary">
                                        <div class="form_fields pull-left ">      
                                             <div class="form-group large">
                                             <label for="exampleInputEmail1">{{'Automatic_Gears'| translate }}</label>
                                              <p class="checkbox">
                                                    <span id="sameAsBA"
                                                    class="chk_tick"
                                                    ng-click = "COUModal.gearActive()"
                                                    ng-class="{'chked' : COUModal.ownedUnitRec.IsAutomatic}"  rel="customerUnitMainAutomaticId">
                                                    
                                                    <i class="fa fa-check-square chksqure"></i>
                                                    </span>
                                         </p>
                                          </div>
                                      </div>
                                   <div class=" controls" id="customerUnitMainAutomaticId">
                                        <i class="fa fa-question-circle"   data-toggle="tooltip" title="Add Automatic/Gears of the Unit" ></i>
                                        <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('IsAutomatic','customerUnitMainAutomaticId')"></i>
                                  </div> 
                                </div>
                                
                                 <div class="option_field"  ng-show="COUModal.ownedUnitRec.IsAutomatic ">
                                        <div class="form_fields pull-left ">      
                                             <div class="form-group large">  
                                              <label for="exampleInputEmail1">{{'Gears'| translate }}</label>
                                                <!-- <input type="text" class="number form-control  haff-form-control textfielduserinput" rel ="customerUnitMainGearscId" 
                                                maxlength="2"  ng-model="COUModal.ownedUnitRec.Gears"/> -->
                                                
                                                <price-only-input id-value = "Gear"
                                                              class-value = "form-control haff-form-control textfielduserinput"
                                                              max-length = "2" 
                                                              precision-length = "-1" 
                                                              input-value = "COUModal.ownedUnitRec.Gears"
                                                              input-model = "COUModal" 
                                                              rel-value = "customerUnitMainGearscId"
                                                              validation-modal = "COUModal.COUFormValidationModal"
                                                              validation-modal-key = "Gear"
                                                              />    
                                              
                                          </div>
                                      </div>
                                      <div class=" controls" id="customerUnitMainGearscId">
                                        <i class="fa fa-question-circle"   data-toggle="tooltip" title="Add Gears of the Unit" ></i>
                                  </div> 
                               </div>
                               
                               <!-- Start: Ticket#1937: Added By Pooja 26 Apr. 2017 -->
                               <div class="option_field" ng-hide="(COUModal.ownedUnitRec.Id != null && COUModal.ownedUnitRec.UnitType == 'STOCK'  && !GroupOnlyPermissions.Costs['read only'])">
	                               <div class="form_fields pull-left" ng-show="COUModal.ownedUnitRec.UnitType == 'STOCK'">
		                                <div class="form-group large required pricefiled">
		                                   <label class="control-label" for="exampleInputEmail1">{{'Cost'| translate }}</label>
		                                   <span class="currency">$</span>
		                                   <price-only-input id-value = "Cost"
	                                          class-value = "form-control smallForm-control"
	                                          max-length = "15" 
	                                          precision-length = "2" 
	                                          input-value = "COUModal.ownedUnitRec.TotalBaseCost"
	                                          input-model = "COUModal" 
	                                          rel-value = "CostTooltipId"
	                                          validation-modal = "COUModal.COUFormValidationModal"
	                                          validation-modal-key = "TotalBaseCost"
                                              disabled-value = "(COUModal.ownedUnitRec.Id != null && COUModal.ownedUnitRec.UnitType == 'STOCK' )"
	                                          />  <!-- Ticket#1937: focus-value, blur-Value added on 26th april, 2017 by kajal -->
	                                          		<!-- focus-value="COUModal.showHideCostAndPriceTooltip('CostTooltipId', true)"
	                                          		blur-Value="COUModal.showHideCostAndPriceTooltip('CostTooltipId', false)"
	                                          		ng-class="{'redborder' : COUModal.COUFormValidationModal['TotalBaseCost'].isError == true}"  -->
		                                </div>
	                                </div>
	                                <div class=" controls" id="CostTooltipId">
	                                   <i class="fa fa-question-circle" data-toggle="tooltip" title="Base Unit Cost"></i>
	                                   <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('TotalBaseCost','CostTooltipId')"></i>
	                               </div> 
	                            </div>
                              
                              <div class="option_field">
	                              <div class="form_fields pull-left" ng-show="COUModal.ownedUnitRec.UnitType == 'STOCK'">
		                                <div class="form-group large pricefiled">
		                                   <label class="control-label" for="exampleInputEmail1">{{'Label_Price'| translate }}</label>
		                                   <span class="currency">$</span>
		                                   <price-only-input id-value = "Price"
	                                          class-value = "form-control smallForm-control"
	                                          max-length = "15" 
	                                          precision-length = "2" 
	                                          input-value = "COUModal.ownedUnitRec.TotalBasePrice"
	                                          input-model = "COUModal" 
	                                          rel-value = "PriceTooltipId"
	                                          validation-modal = "COUModal.COUFormValidationModal"
	                                          validation-modal-key = "TotalBasePrice"
	                                          /><!-- Ticket#1937: focus-value, blur-Value added on 26th april, 2017 by kajal -->
	                                          	<!-- focus-value="COUModal.showHideCostAndPriceTooltip('PriceTooltipId', true)"
	                                          		blur-Value="COUModal.showHideCostAndPriceTooltip('PriceTooltipId', false)" -->
		                                </div>
	                                </div>
	                                <div class=" controls" id="PriceTooltipId">
	                                   <i class="fa fa-question-circle" data-toggle="tooltip" title="Base Unit Price"></i>
	                                   <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('TotalBasePrice','PriceTooltipId')"></i>
	                               </div>
	                            </div>
                               <!-- End: Ticket#1937: Added By Pooja 26 Apr. 2017 -->
                               
													
                               <!-- START: Edited by kajal - 11/21/2016 - #1291 -->
                               <div class="option_field"  ng-show="COUModal.AdditionalFieldsInfo.IsTaxable.isPrimary">
                                        <div class="form_fields pull-left ">      
                                             <div class="form-group large">
                                             <label for="exampleInputEmail1">{{'ViewLabour_Taxable'| translate }}</label> 
                                             <p class="checkbox">
                                                    <span id="Taxable" style="margin: 6px 0;"
                                                    class="chk_tick"
                                                    ng-class="{'chked' : COUModal.ownedUnitRec.IsTaxable, 
                                                    			'permissionDisabledChk': (COUModal.ownedUnitRec.Id != null && COUModal.ownedUnitRec.UnitType == 'STOCK' && !GroupOnlyPermissions['Sales Taxes']['assign'])}"  
                                                    rel="customerUnitMainTaxableId">
                                                        <i class="fa fa-check-square chksqure"
                                                            ng-click="COUModal.onSelectTaxable();"
                                                            ng-keyup="COUModal.onKeyUpTaxable($event);"></i><!--  ng-click="COUModal.taxableActive();" -->

                                                    </span> 
                                              </p>  
                                          </div>
                                      </div>
                                   <div class=" controls" id="customerUnitMainTaxableId">
                                        <i class="fa fa-question-circle"   data-toggle="tooltip" title="Add Taxable of the Unit" ></i>
                                        <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('IsTaxable','customerUnitMainTaxableId')"></i>
                                  </div> 
                                </div>
                                 <div class="option_field" ng-show="COUModal.ownedUnitRec.IsTaxable == true && COUModal.ownedUnitRec.UnitType != 'COU'"> 
                                        <div class="form_fields pull-left ">      
                                             <div class="form-group large">  
                                              <label for="exampleInputEmail1">{{'Add_Part_Tooltip_Applicable_Tax'| translate }} </label>
                                               <select class="form-control haff-form-control " 
                                               ng-change = "COUModal.changeApplicableTax()" 
                                               rel="customerUnitMainApplicableTaxId"  
                                               ng-model="COUModal.ownedUnitRec.ApplicableTax"
                                               ng-focus="COUModal.formFieldJustGotFocus('customerUnitMainApplicableTaxId')"
                                               ng-options="taxItem.Id as taxItem.Name for taxItem in COUModal.ApplicableTaxList"
                                               ng-disabled="COUModal.ownedUnitRec.Id != null && COUModal.ownedUnitRec.UnitType == 'STOCK' && !GroupOnlyPermissions['Sales Taxes']['assign']">
                                            </select>  
                                              
                                             <!-- <input type="text" class="form-control smallForm-control"  ng-model="COUModal.ownedUnitRec.ApplicableTax" rel="customerUnitMainApplicableTaxId"/> -->
                                          </div>
                                      </div>
                                       <div class=" controls" id="customerUnitMainApplicableTaxId">
                                        <i class="fa fa-question-circle"   data-toggle="tooltip" title="{{'Helptext_add_applicable_tax_unit'| translate }}" ></i>
                                  </div> 
                               </div>
                               
                               	<div class="option_field">
	                           		<div class="form_fields pull-left">
	                                	<div class="form-group large">
		                                	<label class="control-label" for="tagInputBox">{{'Tags'| translate }}</label>
		                                   	<div class="searchInputArea feeSearchInputArea tagAutocomplete" ng-class="{'showingOverlay' : COUModal.isFocused}">
		                                        <input type="text" 
		                                        			class="searchInput form-control smallForm-control" placeholder="{{'Search_tag'| translate }}" id="tagInputBox"
				                                            ng-focus="COUModal.onFocusOnTagInput(); COUModal.showToolTip(); COUModal.formFieldJustGotFocus('tagId')"
				                                            ng-keyup="COUModal.changeSeletedTag($event)" 
				                                            ng-blur="COUModal.isFocused = false;" 
				                                            ng-model="COUModal.TagNameStr" rel="tagId" />
		                                        <div class="searchResultOverlay" id="autocompleteScrollDiv">
		                                            <ul>
		                                                <li ng-repeat="tag in COUModal.FilteredTagList = (COUModal.ActiveTagList | orderBy:'Name' | filter:{'Name' : COUModal.TagNameStr})"
		                                                    ng-class="{'selected-row': $index == COUModal.currentSelectedTagIndex}" id="tag_{{$index}}"
		                                                    ng-mousedown="COUModal.selectTag(tag, $index)">
		                                                    <div class="fullName">{{tag.Name}}</div>
		                                                </li>
		                                                <li ng-if="filtered.length == 0"> <div class="fullName" >{{'No_Results_Found'| translate }}</div></li>
		                                            </ul>
		                                        </div>
		                                        <div class="tag">
		                                        	<ul class="tag-ul-list">
		                                        		<li class="tag-list" ng-repeat="tag in COUModal.ownedUnitRec.AssignedTags">
		                                        			<span class="tag-name-span">{{tag}}
		                                        			<i class="svg_width blue_008DC1 cross-icon" ng-include="'{!Application_Images}/Icons/close.svg'" 
																				data-toggle="tooltip" title="Remove" ng-click="COUModal.removeTag(tag, $index)"> </i></span>
		                                        		</li>
		                                        	</ul>
		                                        </div>
                                           	</div>
		                                </div>
	                                </div>
	                                <div class="controls" id="tagId">
                                       <i class="fa fa-question-circle helplink" data-toggle="tooltip" title="{{'Tags'| translate }}"></i>
                                    </div>
	                            </div>
                               
                               <!-- Start: Active Flag -->
                               <div class="option_field"  ng-show="COUModal.AdditionalFieldsInfo.IsActive.isPrimary && COUModal.currentCOUId">
                                        <div class="form_fields pull-left ">      
                                             <div class="form-group large">
                                             <label for="exampleInputEmail1">{{'Label_Active'| translate }}</label> 
                                             
                                             <label class="bp-switch">
                                                 <input ng-model="COUModal.ownedUnitRec.IsActive" type="checkbox"
                                                 ng-change="COUModal.onChangeActive()" rel="customerUnitMainActiveId"/>
                                                 <div class="bp-slider round"></div>
                                             </label>
                                          </div>
                                       </div>
	                                   <div class=" controls" id="customerUnitMainActiveId">
	                                        <i class="fa fa-question-circle"   data-toggle="tooltip" title="Is active unit" ></i>
	                                        <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('IsActive','customerUnitMainActiveId')"></i>
	                                  </div>
                                </div>
                               <!-- End: Active Flag -->
                               
                               <!-- END: Edited by kajal - 11/21/2016 - #1291 -->
                                <div class="option_field"  ng-show="COUModal.AdditionalFieldsInfo.KeyNo.isPrimary">
                                        <div class="form_fields pull-left ">      
                                             <div class="form-group large">
                                             <label for="exampleInputEmail1">{{'Key_no'| translate }}</label>
                                             <input type="text" maxlength="40" id = "KeyNoId"
                                             ng-focus="COUModal.formFieldJustGotFocus('customerUnitMainKeyNoId')" class="form-control smallForm-control textfielduserinput"  ng-model="COUModal.ownedUnitRec.KeyNo" rel="customerUnitMainKeyNoId"/>
                                          </div>
                                      </div>
                                  <div class=" controls" id="customerUnitMainKeyNoId">
                                        <i class="fa fa-question-circle"   data-toggle="tooltip" title="{{'Helptext_add_key_no_unit'| translate }}" ></i>
                                        <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('KeyNo','customerUnitMainKeyNoId')"></i>
                                  </div>
                               </div>
                                   <div class="option_field"  ng-show="COUModal.AdditionalFieldsInfo.Location.isPrimary ">
                                        <div class="form_fields pull-left ">      
                                             <div class="form-group large">  
                                              <label for="exampleInputEmail1">{{'Label_Location'| translate }}</label>
                                             <input type="text" class="form-control smallForm-control textfielduserinput" id = "LocationId"
                                             ng-focus="COUModal.formFieldJustGotFocus('customerUnitMainLocationId')"  ng-model="COUModal.ownedUnitRec.Location" rel="customerUnitMainLocationId"/>
                                          </div>
                                      </div>
                                  <div class=" controls" id="customerUnitMainLocationId">
                                        <i class="fa fa-question-circle"   data-toggle="tooltip" title="{{'Helptext_add_location_unit'| translate }}" ></i>
                                          <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('Location','customerUnitMainLocationId')"></i>
                                  </div>
                               </div>
                                <div class="option_field"  ng-show="COUModal.AdditionalFieldsInfo.ManufacturedDate.isPrimary">
                                        <div class="form_fields pull-left ">      
                                             <div class="form-group large" id = "ManufacturedDateId">
                                             <label for="exampleInputEmail1">{{'Helptext_Manufactured_date'| translate }}</label>
                                               <input type="text" ui-date="dateOptions1" ui-date-format="{{COUModal.DateFormat}}" class="form-control datepicker smallForm-control"
                                                ng-model="COUModal.ownedUnitRec.ManufacturedDate" 
                                                rel="customerUnitMainManufacturedDateId" 
                                                readonly="readonly" id = "StockUnitManufacturedDate"
                                                ng-focus="COUModal.formFieldJustGotFocus('customerUnitMainManufacturedDateId')"
                                                style="background: #FFF;"/> 
                                                <span class="input-group-addon btn" style="cursor:pointer; position: absolute;right: 9%;top: 18%; padding: 0;font-size: 18px;">
                                                            <span class="glyphicon glyphicon-calendar" ng-click = "COUModal.showCalendar('StockUnitManufacturedDate')" ></span>
                                                </span>
                                             
                                             <!-- <input type="text" class="form-control smallForm-control"  ng-model="COUModal.ownedUnitRec.ManufacturedDate" rel="customerUnitMainManufacturedDateId"/> -->
                                          </div>
                                      </div>
                                      <div class=" controls" id="customerUnitMainManufacturedDateId">
                                        <i class="fa fa-question-circle"   data-toggle="tooltip" title="{{'Helptext_add_manufacturedDate_unit'| translate }}" ></i>
                                        <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('ManufacturedDate','customerUnitMainManufacturedDateId')"></i>
                                  </div> 
                               </div>
                               
                                
                               
                              
                               
                             
                               
                               <div class="option_field"  ng-show="COUModal.AdditionalFieldsInfo.Mileage.isPrimary">
                                        <div class="form_fields pull-left ">      
                                             <div class="form-group large">
                                             <label for="exampleInputEmail1">{{'Label_Mileage'| translate }}</label>
                                            <!--  <number-only-input-cou  id-value = "Mileage"  class-value = "form-control haff-form-control"
                                                    rel-value="customerUnitMainoptMileageId"
                                                                            input-value="COUModal.ownedUnitRec.Mileage"
                                                                            ng-class="{'redborder' : COUModal.COUFormValidationModal['Mileage']['isError'] == true}"
                                                                            data-toggle="tooltip" title="{{COUModal.COUFormValidationModal['Mileage']['ErrorMessage'] }}"
                                                                            precision-length = "2"/> -->
                                                                            
                                           <!-- <input type="text" class="number form-control  haff-form-control textfielduserinput" maxlength="6"
                                                ng-class="{'redborder' : COUModal.COUFormValidationModal['Mileage']['isError'] == true}"
                                                ng-model = "COUModal.ownedUnitRec.Mileage" rel="customerUnitMainoptMileageId"/> -->
                                            <price-only-input id-value = "MileageId"
                                                              class-value = "form-control haff-form-control"
                                                              max-length = "6" 
                                                              precision-length = "1" 
                                                              input-value = "COUModal.ownedUnitRec.Mileage"
                                                              input-model = "COUModal" 
                                                              rel-value = "customerUnitMainoptMileageId"
                                                              validation-modal = "COUModal.COUFormValidationModal"
                                                              validation-modal-key = "Mileage"
                                                              />
                                                
                                            <label for="Mileage" class = "mileageSection">{{'Mileage_type'| translate }}</label>
                                               <select class="form-control small-haff-form-control" placeholder="{{'Label_Mileage'| translate }}"  ng-model="COUModal.ownedUnitRec.MileageType"
                                                     ng-options="i.Value as i.Value for i in COUModal.MileageList" ng-focus="COUModal.formFieldJustGotFocus('customerUnitMainoptMileageId')">
                                                </select>   
                                          </div>
                                      </div>
                                  <div class=" controls" id="customerUnitMainoptMileageId">
                                        <i class="fa fa-question-circle"   data-toggle="tooltip" title="{{'Helptext_add_mileage_unit'| translate }}" ></i>
                                        <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('Mileage','customerUnitMainoptMileageId')"></i>
                                  </div>
                               </div> 
                               
                                <div class="option_field"  ng-show="COUModal.AdditionalFieldsInfo.OtherSerialNo.isPrimary">
                                        <div class="form_fields pull-left ">      
                                             <div class="form-group large">
                                             <label for="exampleInputEmail1">{{'Other_serial'| translate }}</label>
                                             <input type="text" maxlength="40" class="form-control smallForm-control textfielduserinput" id =  "OtherSerialID"
                                             ng-focus="COUModal.formFieldJustGotFocus('customerUnitMainOtherSerialId')" ng-blur="COUModal.OnBlurVin('Other')"  ng-model="COUModal.ownedUnitRec.OtherSerialNo" rel="customerUnitMainOtherSerialId"/>
                                          </div>
                                      </div>
                                  <div class=" controls" id="customerUnitMainOtherSerialId">
                                        <i class="fa fa-question-circle"   data-toggle="tooltip" title="{{'Helptext_add_other_serial_unit'| translate }}" ></i>
                                        <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('OtherSerialNo','customerUnitMainOtherSerialId')"></i>
                                  </div>
                               </div>
                                <div class="option_field"  ng-show="COUModal.AdditionalFieldsInfo.Plate.isPrimary">
                                        <div class="form_fields pull-left ">      
                                             <div class="form-group large">
                                             <label for="exampleInputEmail1">{{ 'Plate_reg' | translate }}</label> 
                                             <input type="text" class="textfielduserinput form-control smallForm-control" id = "PlatId"
                                             ng-focus="COUModal.formFieldJustGotFocus('customerUnitMainPlateId')"   maxlength="20"  ng-model="COUModal.ownedUnitRec.Plate" rel="customerUnitMainPlateId"
                                              ng-blur="COUModal.OnBlurVin('Plate')"/>  <!-- Edited by kajal 11/222/2016 -->
                                          </div>
                                      </div>
                                  <div class=" controls" id="customerUnitMainPlateId">
                                        <i class="fa fa-question-circle"   data-toggle="tooltip" title="{{'Helptext_add_plate_unit'| translate }}" ></i>
                                        <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('Plate','customerUnitMainPlateId')"></i>
                                  </div>
                               </div>
                               
                               <!-- START: added by kajal 16th june, 2017 #2223 --> 
                                 <div class="option_field" ng-show="COUModal.AdditionalFieldsInfo.RegExpiryDate.isPrimary"> 
                                 	<div class="form_fields pull-left ">     
                                    	<div class="form-group large">
                                         	<label for="exampleInputEmail1">{{'Reg_Expiry_Date'| translate }}</label>
                                         	<input type="text" 
                                                style="background: #FFF;" 
                                                ui-date="COUModal.dateOptionsForRegExpiryDate"
                                                ui-date-format="{{COUModal.DateFormat}}" 
                                                class="form-control smallForm-control datepicker"
                                                ng-model="COUModal.ownedUnitRec.RegExpiryDate" 
                                                ng-change="" 
                                                rel="customerUnitOptionalRegExpiryDate"
                                                id = "customerUnitRegExpiryDateOption"
                                                readonly="readonly"  ng-focus="COUModal.formFieldJustGotFocus('customerUnitOptionalRegExpiryDate')"/> 
                                   			<span class="input-group-addon btn" style="cursor:pointer; position: absolute;right: 9%;top: 18%; padding: 0;font-size: 18px;">
                                            	<span class="glyphicon glyphicon-calendar" ng-click = "COUModal.showCalendar('customerUnitRegExpiryDateOption')"></span>
                                         	</span> 
                                 		</div>
		                         	 </div>
	                                 <div class=" controls" id="customerUnitOptionalRegExpiryDate">
	                                        <i class="fa fa-question-circle"  data-toggle="tooltip" title="{{'Helptext_add_reg_expiry_date_unit'| translate }}"></i>
	                                        <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('RegExpiryDate','customerUnitOptionalRegExpiryDate')"></i>
	                                 </div>
                                 </div>
                                 
                                 <div class="option_field" ng-show="COUModal.AdditionalFieldsInfo.ComplianceDate.isPrimary">
                               <div class="form_fields pull-left ">
                                  <div class="form-group large vin-loading-icon"  >
                                     <label for="exampleInputEmail1" class="control-label">{{'Compliance_date'| translate }}</label>
                                     <input type="text" class="form-control smallForm-control textfielduserinput" 
                                     ng-focus="COUModal.formFieldJustGotFocus('ComplianceDateId')"  maxlength="10" ng-model="COUModal.ownedUnitRec.ComplianceDate" rel="ComplianceDateId"/>
                                  </div>
                                  </div>
                                    <div class=" controls"  id="ComplianceDateId">
                                        <i class="fa fa-question-circle" data-toggle="tooltip" title="Add Compliance Date of the Unit"></i>
                                        <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('ComplianceDate','ComplianceDateId'); COUModal.vehicleSpecificationsResult = ''" ></i>
                                    </div>
                                  </div>
                                 <div class="option_field" ng-show="COUModal.AdditionalFieldsInfo.YearOf1stRego.isPrimary"> 
                                  <div class="form_fields pull-left ">     
                                  <div class="form-group large">
                                     <label for="exampleInputEmail1">{{ 'Year_of_1st_rego' | translate }}</label>
                                     <select class="form-control haff-form-control" placeholder="{{'Year_of_1st_rego'| translate }}" rel="YearOf1stRegoId" ng-change="COUModal.changeYear()" ng-model="COUModal.YearOf1stRego"
                                             ng-options="i as i.year for i in COUModal.Years track by i.year" ng-focus="COUModal.formFieldJustGotFocus('YearOf1stRegoId')" >
                                     </select>
                                  </div>
                                  </div>
                                  <div class=" controls" id="YearOf1stRegoId">
                                        <i class="fa fa-question-circle"  data-toggle="tooltip" title="Select year of 1st rego"></i>
                                        <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('YearOf1stRego','YearOf1stRegoId')"></i>
                                    </div>  
                                   </div>
                                 
                                 <div class="option_field" ng-show="COUModal.AdditionalFieldsInfo.RegistrationSerial.isPrimary">
                               <div class="form_fields pull-left ">
                                  <div class="form-group large vin-loading-icon"  >
                                     <label for="exampleInputEmail1" class="control-label">{{'Registration_serial'| translate }}</label>
                                     <input type="text" class="form-control textfielduserinput smallForm-control" id="RegistrationSerialFieldId" 
                                            ng-model="COUModal.ownedUnitRec.RegistrationSerial" 
                                             rel="RegistrationSerialId"
                                            data-toggle="tooltip" 
                                            maxlength="10"
                                            ng-focus="COUModal.formFieldJustGotFocus('RegistrationSerialId')"
                                           />  
                                  </div>
                                  </div>
                                    <div class=" controls"  id="RegistrationSerialId">
                                        <i class="fa fa-question-circle" data-toggle="tooltip" title="Add Registration Serial# of the Unit"></i>
                                        <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('RegistrationSerial','RegistrationSerialId'); COUModal.vehicleSpecificationsResult = ''" ></i>
                                    </div>
                                  </div>
                                 <!-- END: added by kajal 16th june, 2017 #2223 --> 
                               
                                                           
                                <!--  <div class="option_field"  ng-show="COUModal.AdditionalFieldsInfo.Plate.isPrimary">
                                        <div class="form_fields pull-left ">      
                                             <div class="form-group large">
                                             <label for="exampleInputEmail1">{{ 'Label_Plate' | translate }}/Reg#</label> 
                                             <input type="text" class="textfielduserinput form-control smallForm-control"  maxlength="20"  ng-model="COUModal.ownedUnitRec.Plate" rel="customerUnitMainPlateId"/>
                                          </div>
                                      </div>
                                  <div class=" controls" id="customerUnitMainPlateId">
                                        <i class="fa fa-question-circle"   data-toggle="tooltip" title="Add Plate of the Unit" ></i>
                                        <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('Plate','customerUnitMainPlateId')"></i>
                                  </div>
                               </div> -->
                               
                                 <!-- <div class="option_field"  ng-show="COUModal.AdditionalFieldsInfo.Gears.isPrimary">
                                        <div class="form_fields pull-left ">      
                                             <div class="form-group large">
                                             <label for="exampleInputEmail1">Automatic/Gears</label>
                                             <input type="text" class="form-control smallForm-control"  ng-model="COUModal.ownedUnitRec.Gears" rel="customerUnitMainAutomaticId"/>
                                          </div>
                                      </div>
                                  <div class=" controls" id="customerUnitMainAutomaticId">
                                        <i class="fa fa-question-circle"   data-toggle="tooltip" title="Add Color of the Unit" ></i>
                                        <i class="fa fa-times" ng-click="COUModal.ClearAndRemoveField('Gears','customerUnitMainAutomaticId')"></i>
                                  </div>
                               </div> -->
                               
                                    <!-- <p>{{COUModal.AdditionalFieldsInfo}}</p> -->
                                    <div class="clearfix"></div>
                                    
	                            
                           <div class="addMoreInfoSection COUaddMoreInfoSection AddEditCouAddMoreFields"> 
                                    <button type="button" class="btn C11  addmoreinfoBtn" Id="addmoreinfoBtnId"
                                        data-toggle="dropdown">{{ 'Label_Add_More_Information' | translate }}</button>
                                    <ul class="add_info_dropdown dropdown-menu scrollDropDown keep_open">
                                        <div class="right-inner-addon" style="margin: 0 10px;">
                                            <i class="glyphicon glyphicon-search"></i> <input
                                                class="form-control ng-pristine ng-untouched ng-valid"
                                                ng-model="COUModal.AdditionalFieldsSearch"
                                                placeholder="{{'Label_Search'| translate }}" type="search" />
        
                                        </div>
                                        <li
                                            ng-repeat="(key,value) in FilterAdditionalFields(COUModal.AdditionalFieldsInfo)"
                                            ng-if="COUModal.manageAdditionalFields(key)"
                                            ng-click="COUModal.ShowAdditionalField(key)"><a
                                            >{{value.label}}</a></li>
                                    </ul>
                            </div> 
                         </form>
                      </div>
                        <div class="right_heading_container col-lg-12 col-md-12">
                         <div class="savecancle_btncntnr pull-right">
                            <button type="button" id="closemodal" class="btn btn-default grayBtn" ng-click="COUModal.CancelCOUForm()">{{ 'Cancel_Label' | translate }}</button>
                            <button type="button" id="saveButton" class="btn btn-default greenBtn"
							ng-disabled="COUModal.disableSaveButton" ng-click="COUModal.SaveCOUForm()">{{ 'Save_Label' | translate }}</button> <!-- ng-disabled Added by richa 21/01/2017 for disabling button after one click -->
                         </div>
                      </div>
                  
                   </div>
                </div>
                <div class="clearfix"></div>
             </div>
          </div>
       </div>
    </div>
    <div class="loadingDivIcon"> </div>
    </div>
    </div>
</apex:page>
