<apex:page standardStylesheets="false" showChat="false" showHeader="false" sidebar="false" docType="html-5.0" controller="GlobalController">
    <apex:stylesheet value="{!Assests}/css/bootstrap4.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    <style>
        @media all and (device-width: 768px) and (device-height: 1024px) and (orientation:portrait) {
        .accountSettingsDashboard .dashboardOptions .box{
        padding: 7% 2% 7% 2% !important;
        }
        }
        @media all and (device-width: 768px) and (device-height: 1024px) and (orientation:landscape) {
        .accountSettingsDashboard .dashboardOptions .box{
        padding: 7% 2% 7% 2% !important;
        }
        }
    </style>
    <div>
        <route-loading-indicator></route-loading-indicator>
        <div ng-cloak="ng-cloak" style="margin-top: 48px;">
            <div class="gridLoadingDiv" style="position: fixed; top: 37%; left: 42%;" ng-show="UserSettingModel.isLoading">
                <c:BPLoading />
            </div>
            <div class="content flexGridcontent" ng-show="UserSettingModel.Users.showHomeSection">
                <div class="subHeader">
                    <div class="row container accountSettingsContainer flexGridContainer">
                        <div class = "col-lg-1 hiddenSmall"></div>
                        <h1  class="col-lg-3 col-sm-6 col-xs-6 accountSettingsHeader M0 P0">{{ 'System' | translate }} {{ 'Settings_User_Page' | translate }}</h1>
                        <div class = "col-lg-1 hiddenSmall pull-right"></div>
                        <div class="col-lg-3 col-md-4  col-xs-5 userProfile pull-right">
                            <h4 class="shortName  text-uppercase">{{currentusername | limitTo : 1}}{{ UserSettingModel.UserLastName | limitTo : 1}}</h4>
                            <div class="fullNameAndRole  pull-left">
                                <h4 class="fullName M0 text-capitalize">{{currentusername}} {{ UserSettingModel.UserLastName}}</h4>
                                <span class="text-capitalize" style="--currentUserGroupColor: {{currentUserGroupColor}}">{{currentUserGroupName}}</span>
                            </div>
                        </div>
                    </div>
                    <div class = "row container flexGridContainer">
                        <div class = "col-lg-1 hiddenSmall"></div>
                        <div class = "col-xs-11 accountSettingsNavBar P0">
                            <ul class="topmenu">
                                <li class="accountSettingsActiveNav text-uppercase"><a>{{ 'Dashboard' | translate}}</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="pageContent">
                    <div class="container">
                        <div class="accountSettingsDashboard">
                            <div class="dashboardOptions">
                                <div class="row row-flex row-flex-wrap flexGrid  accountSettingsDashboardWrapper">
                                    <h2 class="welcomeText col-lg-12 col-xs-12">
                                        {{ 'Hi' | translate }} {{currentusername}},
                                        <p translate="You_can_manage_business_settings" translate-values="{{ {'businessName' :UserSettingModel.businessInfo.BusinessName} }}"></p>
                                    </h2>
                                    <div ng-if="UserSettingModel.displaySettingTile(settingObj.Name)" class="col-sm-6 col-md-4 col-lg-4"  ng-repeat="settingObj in UserSettingModel.Settings | orderBy:'(Name | translate)'" ng-click="UserSettingModel.handleSettingAction(settingObj.Name);">
                                        <div class="box flex-col">
                                            <span class="icon flex-grow">
                                            <i ng-include="trustSrc('{!Application_Images}/Icons/' + settingObj.ImageURL)"
                                                class="blue_008DC1">
                                            </i>
                                            </span>
                                            <a class = "flex-grow">{{ settingObj.Name | translate }}
                                            <span>{{ settingObj.Description | translate }}</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <div class="row M0">
                    <div class="main_section_body" ng-show = "!UserSettingModel.isLoading">
                        <div ng-show="UserSettingModel.Users.showUsersSection">
                            <div class="screen_section row userSection">
                                <div class="col-sm-12 col-lg-12 col-md-12  ">
                                    <div class="row ">
                                        <div class="col-lg-4 col-md-4 priceAndTaxHeader">
                                            <i class="fa fa-users userSettingSectionHeaderIcon"></i>
                                            <span class="T1 userSettingSectionHeaderText">{{ 'Users' | translate }}</span>
                                        </div>
                                    </div>
                                    <div >
                                        <div>
                                            <div ng-if="UserSettingModel.IsTrialOrg">
                                                <span ng-show="UserSettingModel.NewUserList.length > 0">
                                                    <p translate="Add_upto_n_users" translate-values="{{ { NewUserListLimit: UserSettingModel.NewUserList.length } }}"></p>
                                                </span>
                                                <span ng-show="UserSettingModel.NewUserList.length == 0">
                                                {{ 'Max_user_limit_reached_for_trial' | translate }}
                                                </span>
                                            </div>
                                            <div ng-if="!UserSettingModel.IsTrialOrg">
                                                <p translate="You_have_n_active_licenses" translate-values="{{ { ActiveLicenseLimit: 5 } }}"></p>
                                            </div>
                                        </div>
                                        <div class="form">
                                            <div class="row row_margin" ng-repeat="user in UserSettingModel.UserList track by $index">
                                                <div class="col-md-1" ng-show="user.id !=currentUserId">
                                                    <span class="T7 removeuppercase">{{ 'Label_Name' | translate }}</span> 
                                                </div>
                                                <div class="col-md-1" ng-show="user.id == currentUserId">
                                                    <span class="T7 removeuppercase">{{ 'You' | translate }}</span> 
                                                </div>
                                                <div class="col-md-3 removegap" ng-show="user.name !=''">
                                                    <span class="T7 removeuppercase">{{user.name}}</span>
                                                </div>
                                                <div class="col-md-1">
                                                    <span class="T7 removeuppercase">{{ 'Label_Email' | translate }}</span> 
                                                </div>
                                                <div class="col-md-4 removegap" ng-show="user.name !=''">
                                                    <span class="T7 removeuppercase">{{user.email}}</span>
                                                </div>
                                            </div>
                                            <div class="row row_margin" ng-repeat="newuser in UserSettingModel.NewUserList">
                                                <div class="col-md-1 align_New_Entry">
                                                    <span class="T7 removeuppercase">{{ 'Label_Name' | translate }}</span> 
                                                </div>
                                                <div class="col-md-3 removegap">
                                                    <input type="text" 
                                                        ng-model="newuser.name" class="form-control" 
                                                        ng-class="{'redborder' : UserSettingModel.UserSettingModelValidationList[$index]['name']['isError']}" 
                                                        ng-blur="UserSettingModel.validateForm('name',$index); UserSettingModel.validateForm('email',$index);" 
                                                        title="{{UserSettingModel.UserSettingModelValidationList[$index]['name']['ErrorMessage'] }}"/>
                                                </div>
                                                <div class="col-md-1 align_New_Entry">
                                                    <span class="T7 removeuppercase">{{ 'Label_Email' | translate }}</span> 
                                                </div>
                                                <div class="col-md-4 removegap">
                                                    <input type="text" 
                                                        ng-model="newuser.email" 
                                                        class="form-control" 
                                                        ng-class="{'redborder' : UserSettingModel.UserSettingModelValidationList[$index]['email']['isError']}" 
                                                        ng-blur="UserSettingModel.validateForm('email',$index); UserSettingModel.validateForm('name',$index);"  
                                                        title="{{UserSettingModel.UserSettingModelValidationList[$index]['email']['ErrorMessage'] }}"/>
                                                </div>
                                            </div>
                                            <div class="row row_margin M0" style="margin-top: 20px; float: right;width: 100%;padding-right: 5px;text-align: right;">
                                                <button class="btn btn-default greenBtn"
                                                    type="button" 
                                                    ng-click="UserSettingModel.navigateToScreen('Billing');"
                                                    ng-if="UserSettingModel.IsTrialOrg">
                                                {{ 'Upgrade_now' | translate }}
                                                </button>
                                                <button class="btn  addmoreinfoBtn alignbutton ml10" style="width: auto;"
                                                    ng-show="UserSettingModel.NewUserList.length != 0"
                                                    ng-click="UserSettingModel.createUsers();" type="button" 
                                                    ng-class="{'disableBtn' : !UserSettingModel.IsAddNewButtonEnabled() }" >
                                                {{ 'Add_new_users' | translate }}
                                                </button>
                                                <button class="btn  addmoreinfoBtn alignbutton ml10 text-capitalize" type="button" style="width: auto;"
                                                    ng-click = "UserSettingModel.sendEmail('Add Licences')" ng-if="!UserSettingModel.IsTrialOrg">
                                                {{ 'Add_licenses' | translate }}
                                                </button>
                                                <button class="grayBtn btn btn-default btnCancel margin8" ng-click="UserSettingModel.MoveToState('UserSetting',{Id:  'Home'});">Cancel</button>
                                            </div>
                                            <div class="row row_margin M0 pull-right" style="margin-top: 20px; padding-right: 15px;" 
                                                ng-if="!UserSettingModel.IsTrialOrg">
                                                <p style="display: inline-block; margin-right:15px;">To change or modify your users, please contact support</p>
                                                <a class="btn btn-default greenBtn C5" type="button" href="{{UserSettingModel.communityURL}}" target="_blank">
                                                {{ 'Support' | translate }}
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div ng-show = "UserSettingModel.BusinessProfile.showBusinessProfileSection">
                            <div class="screen_section row" ng-if = "UserSettingModel.BusinessProfile.BusinessProfileMasterData.length != 0 "  >
                                <div class="col-sm-12 col-lg-12 col-md-12">
                                    <div class="row ">
                                        <div class="col-lg-4 col-md-4 priceAndTaxHeader">
                                            <i class="fa fa-building Plr5 FC7 F18 bigIcon priceAndTaxIcon"></i>  
                                            <span class="T1 priceAndTaxText">{{ 'Business_profile' | translate}}</span>  
                                        </div>
                                    </div>
                                    <div class=" row subheadingcolor">  
                                        {{ 'Primary_owner_of_business_message' | translate}} 
                                    </div>
                                    <div id="BusinessDetailsSection">
                                        <div class="settings_Header row">
                                            <div class="col-lg-3 col-md-3">
                                                <div class="fixedHeaderText">
                                                    <span class="headerlabel">
                                                    <i class="fa fa-angle-down" ng-show="UserSettingModel.BusinessProfile.showBusinessDetailSection" ng-click="UserSettingModel.BusinessProfile.toggleBusinessDetailSectionView();"></i>
                                                    <i class="fa fa-angle-right" ng-show="!UserSettingModel.BusinessProfile.showBusinessDetailSection" ng-click="UserSettingModel.BusinessProfile.toggleBusinessDetailSectionView();"></i>
                                                    <span class="divider">|</span>
                                                    <span class="T2">{{ 'Business_details' | translate}}</span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="BusinessDetails"  ng-show="UserSettingModel.BusinessProfile.showBusinessDetailSection">
                                            <div class="main_section row" >
                                                <div class="form">
                                                    <div class="row margin8">
                                                        <div class="col-md-2 margin8">
                                                            <label><span class="FC9">*</span>{{ 'Business_name' | translate}}</label> 
                                                        </div>
                                                        <div class="col-md-2">
                                                            <input  class="form-control" ng-model="UserSettingModel.BusinessProfile.BusinessProfileObj.BusinessName"
                                                                ng-blur="UserSettingModel.ValidateBusinessProfile('BusinessName');"
                                                                ng-class="{'redborder' : UserSettingModel.BusinessProfileValidation['BusinessName']['isError'] == true}"
                                                                title="{{UserSettingModel.BusinessProfileValidation['BusinessName']['ErrorMessage'] }}" />
                                                        </div>
                                                    </div>
                                                    <div class="row margin8">
                                                        <div class="col-md-2 margin8">
                                                            <label><span class="FC9">*</span>{{ 'Business_phone' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <input type="text" class="form-control" 
                                                                ng-model="UserSettingModel.BusinessProfile.BusinessProfileObj.BusinessPhone"
                                                                ng-blur="UserSettingModel.ValidateBusinessProfile('BusinessPhone');"
                                                                ng-class="{'redborder' : UserSettingModel.BusinessProfileValidation['BusinessPhone']['isError'] == true}"
                                                                title="{{UserSettingModel.BusinessProfileValidation['BusinessPhone']['ErrorMessage'] }}" />
                                                        </div>
                                                        <div class="col-md-3 col-md-offset-1">
                                                            <label class="margin8"><span class="FC9">*</span>{{ 'Business_email' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <input type="text" class="form-control" 
                                                                ng-model="UserSettingModel.BusinessProfile.BusinessProfileObj.BusinessEmail"
                                                                ng-blur="UserSettingModel.ValidateBusinessProfile('BusinessEmail');"
                                                                ng-class="{'redborder' : UserSettingModel.BusinessProfileValidation['BusinessEmail']['isError'] == true}"
                                                                title="{{UserSettingModel.BusinessProfileValidation['BusinessEmail']['ErrorMessage'] }}"/>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="BusinessAddressSection">
                                        <div class="settings_Header row">
                                            <div class="col-lg-3 col-md-3">
                                                <div class="fixedHeaderText">
                                                    <span class="headerlabel">
                                                    <i class="fa fa-angle-down" ng-show="UserSettingModel.BusinessProfile.showBusinessAddressSection" ng-click="UserSettingModel.BusinessProfile.toggleBusinessAddressSectionView();"></i>
                                                    <i class="fa fa-angle-right" ng-show="!UserSettingModel.BusinessProfile.showBusinessAddressSection" ng-click="UserSettingModel.BusinessProfile.toggleBusinessAddressSectionView();"></i>
                                                    <span class="divider">|</span>
                                                    <span class="T2">{{ 'Business_address' | translate}}</span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="BusinessAddress" ng-show="UserSettingModel.BusinessProfile.showBusinessAddressSection">
                                            <div class="main_section row" >
                                                <div class="form">
                                                    <div class="row margin8">
                                                        <div class="col-md-2 margin8">
                                                            <label><span class="FC9">*</span>{{ 'Street_address_line_1' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <input class="form-control" ng-model="UserSettingModel.BusinessProfile.BusinessProfileObj.BusinessStreetAddress1"
                                                                ng-blur="UserSettingModel.ValidateBusinessProfile('BusinessStreetAddress1');"
                                                                ng-class="{'redborder' : UserSettingModel.BusinessProfileValidation['BusinessStreetAddress1']['isError'] == true}"
                                                                title="{{UserSettingModel.BusinessProfileValidation['BusinessStreetAddress1']['ErrorMessage'] }}" />
                                                        </div>
                                                        <div class="col-md-3 col-md-offset-1">
                                                            <label class="margin8">{{ 'Street_address_line_2' | translate}} {{ 'Optional_tag' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <input class="form-control" ng-model="UserSettingModel.BusinessProfile.BusinessProfileObj.BusinessStreetAddress2"/>
                                                        </div>
                                                    </div>
                                                    <div class="row margin8">
                                                        <div class="col-md-2 margin8">
                                                            <label><span class="FC9">*</span>{{ 'Label_City' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <input class="form-control" ng-model="UserSettingModel.BusinessProfile.BusinessProfileObj.BusinessCity"
                                                                ng-blur="UserSettingModel.ValidateBusinessProfile('BusinessCity');"
                                                                ng-class="{'redborder' : UserSettingModel.BusinessProfileValidation['BusinessCity']['isError'] == true}"
                                                                title="{{UserSettingModel.BusinessProfileValidation['BusinessCity']['ErrorMessage'] }}" />
                                                        </div>
                                                        <div class="col-md-3 col-md-offset-1">
                                                            <label class="margin8"><span class="FC9">*</span>{{ 'Zip_post_code' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <input class="form-control" ng-model="UserSettingModel.BusinessProfile.BusinessProfileObj.BusinessZipCode"
                                                                ng-blur="UserSettingModel.ValidateBusinessProfile('BusinessZipCode');"
                                                                ng-class="{'redborder' : UserSettingModel.BusinessProfileValidation['BusinessZipCode']['isError'] == true}"
                                                                title="{{UserSettingModel.BusinessProfileValidation['BusinessZipCode']['ErrorMessage'] }}" />
                                                        </div>
                                                    </div>
                                                    <div class="row margin8">
                                                        <div class="col-md-2 margin8">
                                                            <label><span class="FC9">*</span>{{ 'Label_Country' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <select class="form-control"
                                                                ng-model="UserSettingModel.BusinessProfile.BusinessProfileObj.BusinessCountry"
                                                                ng-change="UserSettingModel.BusinessProfile.countryChange()"
                                                                ng-options="country.CountryName for country in UserSettingModel.BusinessProfile.BusinessProfileMasterData"
                                                                ng-blur="UserSettingModel.ValidateBusinessProfile('BusinessCountry');"
                                                                ng-class="{'redborder' : UserSettingModel.BusinessProfileValidation['BusinessCountry']['isError'] == true}"
                                                                title="{{UserSettingModel.BusinessProfileValidation['BusinessCountry']['ErrorMessage'] }}">
                                                            </select>
                                                        </div>
                                                        <div class="col-md-3 col-md-offset-1">
                                                            <label class="margin8"><span class="FC9">*</span>{{ 'State_County_Province' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <select class="form-control" ng-model="UserSettingModel.BusinessProfile.BusinessProfileObj.BusinessState" 
                                                                ng-options="state.StateName for state in UserSettingModel.BusinessProfile.BusinessProfileMasterData.StateRec"
                                                                ng-blur="UserSettingModel.ValidateBusinessProfile('BusinessState');"
                                                                ng-class="{'redborder' : UserSettingModel.BusinessProfileValidation['BusinessState']['isError'] == true}"
                                                                title="{{UserSettingModel.BusinessProfileValidation['BusinessState']['ErrorMessage'] }}" >
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="ShippingAddressSection">
                                        <div class="settings_Header row">
                                            <div class="col-lg-3 col-md-3">
                                                <div class="fixedHeaderText">
                                                    <span class="headerlabel">
                                                    <i class="fa fa-angle-down" ng-show="UserSettingModel.BusinessProfile.showShippingAddressSection"  ng-click="UserSettingModel.BusinessProfile.toggleShippingAddressSectionView();"></i>
                                                    <i class="fa fa-angle-right" ng-show="!UserSettingModel.BusinessProfile.showShippingAddressSection"  ng-click="UserSettingModel.BusinessProfile.toggleShippingAddressSectionView();"></i>
                                                    <span class="divider">|</span>
                                                    <span class="T2">{{ 'Shipping_address' | translate}}</span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="ShippingAddress" ng-show="UserSettingModel.BusinessProfile.showShippingAddressSection">
                                            <div class="main_section row" >
                                                <div class="form">
                                                    <div class="row margin8">
                                                        <div class="col-md-2 margin8">
                                                            <label>{{ 'Same_as_business' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <select class="form-control" ng-model="UserSettingModel.BusinessProfile.BusinessProfileObj.IsSameAsBusinessAddress" 
                                                                ng-options="item.Value as item.Level for item in UserSettingModel.BusinessProfile.SameAsBusiness" 
                                                                ng-blur="UserSettingModel.ValidateBusinessProfile('IsSameAsBusinessAddress');"
                                                                ng-change = "UserSettingModel.BusinessProfile.setShippingAddressData()" ></select>
                                                        </div>
                                                    </div>
                                                    <div class="row margin8" ng-show="!UserSettingModel.BusinessProfile.BusinessProfileObj.IsSameAsBusinessAddress">
                                                        <div class="col-md-2 margin8">
                                                            <label>{{ 'Company_name' | translate}} {{ 'Optional_tag' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <input class="form-control" ng-model="UserSettingModel.BusinessProfile.BusinessProfileObj.ShippingCompanyName"/>
                                                        </div>
                                                    </div>
                                                    <div class="row margin8" ng-show="!UserSettingModel.BusinessProfile.BusinessProfileObj.IsSameAsBusinessAddress">
                                                        <div class="col-md-2 margin8">
                                                            <label><span class="FC9">*</span>{{ 'Street_address_1' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <input class="form-control" ng-model="UserSettingModel.BusinessProfile.BusinessProfileObj.ShippingStreetAddress1"
                                                                ng-blur="UserSettingModel.ValidateBusinessProfile('ShippingStreetAddress1');"
                                                                ng-class="{'redborder' : UserSettingModel.BusinessProfileValidation['ShippingStreetAddress1']['isError'] == true}"
                                                                title="{{UserSettingModel.BusinessProfileValidation['ShippingStreetAddress1']['ErrorMessage'] }}" />
                                                        </div>
                                                        <div class="col-md-3 col-md-offset-1">
                                                            <label class="margin8">{{ 'Street_address_2' | translate}} {{ 'Optional_tag' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <input class="form-control" ng-model="UserSettingModel.BusinessProfile.BusinessProfileObj.ShippingStreetAddress2"/>
                                                        </div>
                                                    </div>
                                                    <div class="row margin8" ng-show="!UserSettingModel.BusinessProfile.BusinessProfileObj.IsSameAsBusinessAddress">
                                                        <div class="col-md-2 margin8">
                                                            <label><span class="FC9">*</span>{{ 'Label_City' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <input class="form-control" ng-model="UserSettingModel.BusinessProfile.BusinessProfileObj.ShippingCity"
                                                                ng-blur="UserSettingModel.ValidateBusinessProfile('ShippingCity');"
                                                                ng-class="{'redborder' : UserSettingModel.BusinessProfileValidation['ShippingCity']['isError'] == true}"
                                                                title="{{UserSettingModel.BusinessProfileValidation['ShippingCity']['ErrorMessage'] }}" />
                                                        </div>
                                                        <div class="col-md-3 col-md-offset-1">
                                                            <label class="margin8"><span class="FC9">*</span>{{ 'Zip_post_code' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <input class="form-control" ng-model="UserSettingModel.BusinessProfile.BusinessProfileObj.ShippingZipCode"
                                                                ng-blur="UserSettingModel.ValidateBusinessProfile('ShippingZipCode');"
                                                                ng-class="{'redborder' : UserSettingModel.BusinessProfileValidation['ShippingZipCode']['isError'] == true}"
                                                                title="{{UserSettingModel.BusinessProfileValidation['ShippingZipCode']['ErrorMessage'] }}" />
                                                        </div>
                                                    </div>
                                                    <div class="row margin8" ng-show="!UserSettingModel.BusinessProfile.BusinessProfileObj.IsSameAsBusinessAddress">
                                                        <div class="col-md-2 margin8">
                                                            <label><span class="FC9">*</span>{{ 'Label_Country' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <select class="form-control" ng-model="UserSettingModel.BusinessProfile.BusinessProfileObj.ShippingCountry"
                                                                ng-change = "UserSettingModel.BusinessProfile.shippingCountryChange()" 
                                                                ng-blur="UserSettingModel.ValidateBusinessProfile('ShippingCountry');"
                                                                ng-options="country.CountryName for country in UserSettingModel.BusinessProfile.BusinessProfileMasterData"
                                                                ng-class="{'redborder' : UserSettingModel.BusinessProfileValidation['ShippingCountry']['isError'] == true}"
                                                                title="{{UserSettingModel.BusinessProfileValidation['ShippingCountry']['ErrorMessage'] }}">
                                                            </select>
                                                        </div>
                                                        <div class="col-md-3 col-md-offset-1">
                                                            <label class="margin8"><span class="FC9">*</span>{{ 'State_County_Province' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <select class="form-control" 
                                                                ng-model="UserSettingModel.BusinessProfile.BusinessProfileObj.ShippingState" 
                                                                ng-options="state.StateName for state in UserSettingModel.BusinessProfile.BusinessProfileMasterData.ShippingStateRec"
                                                                ng-blur="UserSettingModel.ValidateBusinessProfile('ShippingState');"
                                                                ng-class="{'redborder' : UserSettingModel.BusinessProfileValidation['ShippingState']['isError'] == true}"
                                                                title="{{UserSettingModel.BusinessProfileValidation['ShippingState']['ErrorMessage'] }}">
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="main_section row">
                                        <span>
                                        <button class="grayBtn btn btn-default btnCancel pull-right margin8 text-uppercase"  ng-click="UserSettingModel.MoveToState('UserSetting',{Id:  'Home'});">{{UserSettingModel.BusinessProfile.isBusinessProfileDataSaved == false ? ('Cancel' | translate) : ('Back' | translate)}}</button>
                                        <button class="btn btn-default greenBtn pull-right margin8 text-uppercase" ng-class="{'disableBtn' : !UserSettingModel.BusinessProfile.IsSaveButtonEnabled()}" ng-click="UserSettingModel.BusinessProfile.saveBusinessProfileData();">{{ 'Save' | translate }}</button>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div ng-show = "UserSettingModel.Billing.showBillingSection">
                            <div class="screen_section row">
                                <div class="col-sm-12">
                                    <div class="row marginbottom16">
                                        <div class="col-lg-4 col-md-4">
                                            <i class="fa fa-credit-card Plr5 FC7 F18 bigIcon"></i><span class="gen_heading T2 removeborderbottom">Billing</span>
                                        </div>
                                    </div>
                                    <div class="T3 removeuppercase subheadingcolor" ng-if="UserSettingModel.IsTrialOrg"> 
                                        {{ 'Sign_up_for_an_account' | translate}}
                                    </div>
                                    <div ng-if="!UserSettingModel.IsTrialOrg" class="T3 removeuppercase subheadingcolor">
                                        {{ 'View_payment_details_history' | translate}}
                                    </div>
                                    <div class="trialAccount" ng-show="UserSettingModel.Billing.viewTrialAccountScreen">
                                        <div class="settings_Header row">
                                            <div class="col-lg-3 col-md-3">
                                                <div class="fixedHeaderText">
                                                    <span class="headerlabel">
                                                    <i class="fa fa-angle-down" 
                                                        ng-show="UserSettingModel.Billing.showTrialAccountSection" 
                                                        ng-click="UserSettingModel.Billing.toggleTrialAccountSectionView();"></i>
                                                    <i class="fa fa-angle-right" 
                                                        ng-show="!UserSettingModel.Billing.showTrialAccountSection"  
                                                        ng-click="UserSettingModel.Billing.toggleTrialAccountSectionView();"></i>
                                                    <span class="divider">|</span>
                                                    <span class="T2" ng-if="UserSettingModel.IsTrialOrg">{{ 'Trial_account' | translate}}</span>
                                                    <span class="T2" ng-if="!UserSettingModel.IsTrialOrg">{{ 'License_details' | translate}}</span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form" ng-show="UserSettingModel.Billing.showTrialAccountSection" ng-if="UserSettingModel.IsTrialOrg" >
                                            <div class="row margin8">
                                                <div class="col-sm-12" style="margin-top: 8px;">
                                                    <span class = "col-md-8" translate="Trial_account_expiration_message_with_days" translate-values="{{ {  expirationDays : UserSettingModel.Billing.noOfDays } }}">
                                                    </span>
                                                    <button class="btn btn-default greenBtn margin8"  ng-click="UserSettingModel.Billing.upgradeAccount();">{{ 'Upgrade_now' | translate}}</button>
                                                </div>
                                            </div>
                                            <div class="row margin8">
                                                <div class="col-sm-12">
                                                    <span class = "col-md-8">
                                                    {{ 'Trial_extension_request_text' | translate}}
                                                    </span>
                                                    <button class="btn btn-default  margin8 addmoreinfoBtn alignbutton"  style="width: 115px;" ng-click="UserSettingModel.Billing.showLicenseDetails();">{{ 'Support' | translate}}</button>
                                                </div>
                                            </div>
                                            <div class="row margin8">
                                                <div class="col-sm-12">
                                                    <span class = "col-md-8">
                                                    </span>
                                                    <button class="grayBtn btn btn-default btnCancel margin8" ng-click="UserSettingModel.MoveToState('UserSetting',{Id:  'Home'});">{{ 'Cancel_Label' | translate}}</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class = "form billingPaid" ng-show = "UserSettingModel.Billing.showTrialAccountSection" ng-if="!UserSettingModel.IsTrialOrg">
                                            <p class = " col-md-6">
                                                {{ 'Active_subscription_message' | translate }}
                                            </p>
                                            <div class = "pull-right col-md-4">
                                                <button class = "btn addmoreinfoBtn alignbutton  "  ng-click = "UserSettingModel.sendEmail('Cancel Your Licenses')" style="width: auto; color: #FFF;"> Cancel licenses</button>
                                                <button class = "btn addmoreinfoBtn alignbutton  " style="width: auto; color: #FFF;" ng-click = "UserSettingModel.sendEmail('Buy more Licenses')"> Buy more licenses</button>
                                                <button class="grayBtn btn btn-default btnCancel" ng-click="UserSettingModel.MoveToState('UserSetting',{Id:  'Home'});">Cancel</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="upgradeAccount" ng-show="UserSettingModel.Billing.ViewUpgradeAccountScreen">
                                        <div class="settings_Header row">
                                            <div class="col-lg-3 col-md-3">
                                                <div class="fixedHeaderText">
                                                    <span class="headerlabel">
                                                    <i class="fa fa-angle-down" 
                                                        ng-show="UserSettingModel.Billing.showUpgradeAccountSection" 
                                                        ng-click="UserSettingModel.Billing.toggleUpgradeAccountSectionView();"></i>
                                                    <i class="fa fa-angle-right" 
                                                        ng-show="!UserSettingModel.Billing.showUpgradeAccountSection"  
                                                        ng-click="UserSettingModel.Billing.toggleUpgradeAccountSectionView();"></i>
                                                    <span class="divider">|</span>
                                                    <span class="T2">{{ 'Upgrade_account' | translate }}</span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form" ng-show="UserSettingModel.Billing.showUpgradeAccountSection">
                                            <div class="row margin8">
                                                <div class="col-sm-12 margin8">
                                                    {{ 'Enter_phone_no_message' | translate }}
                                                </div>
                                            </div>
                                            <div class="row margin8">
                                                <div class="col-sm-2 margin8 upgradeAccountFormElement">
                                                    <label>{{ 'Country_code' | translate }}</label>
                                                </div>
                                                <div class="col-sm-2 margin8">
                                                    <select class="form-control" 
                                                        ng-model="UserSettingModel.Billing.DataToUpgrade.IDDCode" 
                                                        ng-options="v as v for (k, v) in UserSettingModel.countryCodeToIDDMap" ></select>
                                                </div>
                                                <div class="col-sm-2 margin8 upgradeAccountFormElement">
                                                    <label class="margin8">{{ 'Label_Phone_Number' | translate }}</label>
                                                </div>
                                                <div class="col-sm-2 margin8">
                                                    <input class="form-control" ng-model="UserSettingModel.Billing.DataToUpgrade.Phone"
                                                        ng-class="{'redborder' : UserSettingModel.BillingValidation['Phone']['isError'] == true}"
                                                        ng-blur=" UserSettingModel.billingValidateForm('Phone');"
                                                        data-toggle="tooltip"
                                                        title="{{UserSettingModel.BillingValidation['Phone']['ErrorMessage'] }}"
                                                        />
                                                </div>
                                                <div class="col-sm-2 margin8">
                                                    <a class="btn addmoreinfoBtn alignbutton " style="width: auto; color: #FFF; font-size: 14px;"
                                                        ng-class="{'addmoreinfoBtn' : UserSettingModel.isSendActive , 'disableBtn' : !UserSettingModel.isSendActive}" 
                                                        ng-click = "UserSettingModel.upgradeAccount()">
                                                    {{ 'Label_Send' | translate}}
                                                    </a>
                                                    <button class="grayBtn btn btn-default btnCancel" ng-click="UserSettingModel.MoveToState('UserSetting',{Id:  'Home'});">Cancel</button>
                                                </div>
                                            </div>
                                            <div class="row margin8">
                                                <div class="col-sm-2 margin8 upgradeAccountFormElement">
                                                    <label>{{ 'Label_Date' | translate}}</label>
                                                </div>
                                                <div class="col-sm-2 margin8">
                                                    <input type="text" class="col-md-12  form-control datepicker" id = "UserSettingDatePicker"
                                                        ui-date="billingdateOptions" ui-date-format="{{UserSettingModel.dateFormat}}" rel = "billineDateOption" 
                                                        ng-model="UserSettingModel.Billing.DataToUpgrade.UpgradeDate" 
                                                        style="background: #FFF; cursor:pointer;"
                                                        readonly="readonly" />
                                                    <span class="input-group-addon btn" style="cursor:pointer; position: absolute;right: 18%;top: 20%; border:none;outline:none; padding: 0;font-size: 18px;">
                                                    <span class="glyphicon glyphicon-calendar" ng-click = " UserSettingModel.showDatePicker()"></span>
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="row margin8">
                                                <div class="col-sm-2 margin8 upgradeAccountFormElement">
                                                    <label>{{ 'Time' | translate}}</label>
                                                </div>
                                                <div class="col-sm-2 margin8">
                                                    <select class="form-control" ng-model="UserSettingModel.Billing.DataToUpgrade.UpgradeTime" 
                                                        ng-options="time for time in UserSettingModel.Billing.TimeList" ></select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="licenseDetail" ng-show="UserSettingModel.Billing.ViewLicenseDetailScreen">
                                        <div class="settings_Header row">
                                            <div class="col-lg-3 col-md-3">
                                                <div class="fixedHeaderText">
                                                    <span class="headerlabel">
                                                    <i class="fa fa-angle-down" 
                                                        ng-show="UserSettingModel.Billing.showLicenseDetailSection" 
                                                        ng-click="UserSettingModel.Billing.toggleLicenseDetailSectionView();"></i>
                                                    <i class="fa fa-angle-right" 
                                                        ng-show="!UserSettingModel.Billing.showLicenseDetailSection"  
                                                        ng-click="UserSettingModel.Billing.toggleLicenseDetailSectionView();"></i>
                                                    <span class="divider">|</span>
                                                    <span class="T2">{{ 'License_details' | translate}}</span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form" ng-show="UserSettingModel.Billing.showLicenseDetailSection">
                                            <div class="row margin8">
                                                <div class="col-sm-6 margin8">.
                                                    {{ 'Active_subscription_message' | translate}}
                                                </div>
                                                <div class="col-sm-5 margin8 text-right">
                                                    <button class = "btn addmoreinfoBtn alignbutton  "  
                                                        ng-click="UserSettingModel.sendEmail('Cancel Your Licenses')" 
                                                        style="width: auto; color: #FFF;">{{ 'Cancel_licenses' | translate}}</button>
                                                    <button class = "btn addmoreinfoBtn alignbutton  " 
                                                        style="width: auto; color: #FFF;" 
                                                        ng-click = "UserSettingModel.sendEmail('Buy more Licenses')">{{ 'Buy_more_licenses' | translate}}</button>
                                                    <button class="grayBtn btn btn-default btnCancel" 
                                                        ng-click="UserSettingModel.MoveToState('UserSetting',{Id:  'Home'});">{{ 'Cancel_Label' | translate}}</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div ng-show = "UserSettingModel.ImportAndExport.showImportSection">
                            <div class="screen_section row">
                                <div class="col-sm-12">
                                    <div class="row marginbottom16">
                                        <div class="col-lg-4 col-md-4">
                                            <i class="fa fa-cubes Plr5 FC7 F18 bigIcon"></i><span class="gen_heading T2 removeborderbottom">{{ 'Import_and_export_data' | translate}}</span>
                                        </div>
                                    </div>
                                    <div class="T3 removeuppercase subheadingcolor"> 
                                        {{ 'Manage_your_data' | translate}}
                                    </div>
                                    <div class="importYourData">
                                        <div class="settings_Header row">
                                            <div class="col-lg-3 col-md-3">
                                                <div class="fixedHeaderText">
                                                    <span class="headerlabel">
                                                    <i class="fa fa-angle-down" 
                                                        ng-show="UserSettingModel.ImportAndExport.showImportDataSection" 
                                                        ng-click="UserSettingModel.ImportAndExport.toggleImportDataSectionView();"></i>
                                                    <i class="fa fa-angle-right" 
                                                        ng-show="!UserSettingModel.ImportAndExport.showImportDataSection"  
                                                        ng-click="UserSettingModel.ImportAndExport.toggleImportDataSectionView();"></i>
                                                    <span class="divider">|</span>
                                                    <span class="T2">{{ 'Import_your_data' | translate}}</span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form margin8" ng-show="UserSettingModel.ImportAndExport.showImportDataSection">
                                            <div class = "col-md-12">
                                                <span class="margin8 col-md-8 ">
                                                {{ 'Import_part_vendor_data_message' | translate}} </span>
                                                <a class="btn btn-default  margin8 addmoreinfoBtn alignbutton" style="width: auto; color: #FFF;" href="{{UserSettingModel.communityURL}}" target="_blanck" >{{ 'Support' | translate}}</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="clearfix"></div>
                                    <div class="exportAccountingData">
                                        <div class="settings_Header row">
                                            <div class="col-lg-3 col-md-3">
                                                <div class="fixedHeaderText">
                                                    <span class="headerlabel">
                                                    <i class="fa fa-angle-down" 
                                                        ng-show="UserSettingModel.ImportAndExport.showExportDataSection" 
                                                        ng-click="UserSettingModel.ImportAndExport.toggleExportDataSectionView();"></i>
                                                    <i class="fa fa-angle-right" 
                                                        ng-show="!UserSettingModel.ImportAndExport.showExportDataSection"  
                                                        ng-click="UserSettingModel.ImportAndExport.toggleExportDataSectionView();"></i>
                                                    <span class="divider">|</span>
                                                    <span class="T2">{{ 'Export_accounting_data' | translate}}</span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class=" form margin8" ng-show="UserSettingModel.ImportAndExport.showExportDataSection">
                                            <div class="col-md-12">
                                                <button class="btn btn-default  margin8 addmoreinfoBtn alignbutton" style="width: auto; color: #FFF;" ng-click="UserSettingModel.MoveToState('AccountingExport');">GENERATE EXPORTS</button> 
                                                <table class="table margin8 table-bordered table-responsive"
                                                    ng-show="UserSettingModel.ImportAndExport.exportdata.length != 0">
                                                    <thead style="background-color:SlateGray; color:#fff;">
                                                        <tr>
                                                            <th>{{ 'Label_Created' | translate}}</th>
                                                            <th>{{ 'File_Name' | translate}}</th>
                                                            <th>{{ 'Time_period' | translate}}</th>
                                                            <th>{{ 'Label_Records' | translate}}</th>
                                                            <th>{{ 'Created_by' | translate}}</th>
                                                            <th>{{ 'Label_Actions' | translate}}</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr ng-repeat = "exportfile in UserSettingModel.ImportAndExport.exportedDataAttachmentList | orderBy:'-LastModifiedDate'">
                                                            <td style="vertical-align: middle;">{{exportfile.LastModifiedDate}}</td>
                                                            <td style="vertical-align: middle;">{{exportfile.Name}}</td>
                                                            <td style="vertical-align: middle;">{{exportfile.TimePeriod}}</td>
                                                            <td style="vertical-align: middle;">{{exportfile.NoOfRecords}}</td>
                                                            <td style="vertical-align: middle;">{{exportfile.CreatedBy}}</td>
                                                            <td>
                                                                <span>
                                                                <a class="btn btn-default greenBtn margin8" 
                                                                    href = "/servlet/servlet.FileDownload?file={{exportfile.Id}}"  type="text/csv;charset=utf8;"
                                                                    download="download">{{ 'Download' | translate}}</a>
                                                                </span>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="btn btn-default grayBtn pull-right margin8" ng-click="UserSettingModel.MoveToState('UserSetting',{Id:  'Home'});">{{ 'Cancel_Label' | translate}}</button>
                                </div>
                            </div>
                        </div>
                        <div ng-show ="UserSettingModel.PriceAndTax.showPriceAndTaxScreen">
                            <div class="screen_section row" ng-if = "UserSettingModel.PriceAndTax.PriceAndTaxData.length != 0 || UserSettingModel.PriceAndTax.PriceAndTaxMasterData.length != 0">
                                <div class="col-sm-12 col-lg-12 col-md-12">
                                    <div class="row ">
                                        <div class="col-lg-4 col-md-4 priceAndTaxHeader">
                                            <i class="fa fa-usd priceAndTaxIcon"></i> 
                                            <span class="T1 priceAndTaxText">{{ 'Settings_and_controls' | translate}}</span> 
                                        </div>
                                    </div>
                                    <div class=" row subheadingcolor">  
                                        {{ 'Set_system_settings_message' | translate}}  
                                    </div>
                                    <div class="appSetting">
                                        <div class="settings_Header row">
                                            <div class="col-lg-3 col-md-3">
                                                <div class="fixedHeaderText bp-pointer-cursor" ng-click="UserSettingModel.PriceAndTax.toogleSectionView('showAppSetting');">
                                                    <span class="headerlabel">
                                                    <i class="fa fa-angle-down" ng-show="UserSettingModel.PriceAndTax.showAppSetting" ></i>
                                                    <i class="fa fa-angle-right" ng-show="!UserSettingModel.PriceAndTax.showAppSetting" ></i>
                                                    <span class="divider">|</span>
                                                    <span class="T2">{{ 'App_settings' | translate}}</span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="app_settings"  ng-show="UserSettingModel.PriceAndTax.showAppSetting">
                                            <div class="main_section row" >
                                                <div class="form">
                                                    <div class="row margin8">
                                                        <div class="col-md-2 margin8">
                                                            <label>{{ 'Region' | translate}}</label> 
                                                        </div>
                                                        <div class="col-md-2">
                                                            <select class="form-control" ng-model="UserSettingModel.PriceAndTax.PriceAndTaxData.SelectedCountry" ng-change = "UserSettingModel.PriceAndTax.countryChange()"
                                                                ng-options="country.CountryName for country in UserSettingModel.PriceAndTax.PriceAndTaxMasterData.countryList"></select>
                                                        </div>
                                                        <div class="col-md-3 col-md-offset-1">
                                                            <label class="margin8">{{ 'Tax_Id' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <input class="form-control" ng-model="UserSettingModel.PriceAndTax.PriceAndTaxData.taxId"/>
                                                        </div>
                                                    </div>
                                                    <div class="row margin8">
                                                        <div class="col-md-2 margin8">
                                                            <label>{{ 'Label_State' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <select class="form-control" ng-model="UserSettingModel.PriceAndTax.PriceAndTaxData.state"  ng-change = "UserSettingModel.PriceAndTax.stateTimeChange()"
                                                                ng-options="state.StateName for state in UserSettingModel.PriceAndTax.PriceAndTaxData.StateRec track by state.Id"></select>
                                                        </div>
                                                        <div class="col-md-3 col-md-offset-1">
                                                            <label class="margin8">{{ 'Timezone' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <select class="form-control" ng-model="UserSettingModel.PriceAndTax.PriceAndTaxData.Time" 
                                                                ng-options="timezone.Label for timezone in UserSettingModel.PriceAndTax.PriceAndTaxData.TimeRec"></select>
                                                        </div>
                                                    </div>
                                                    <div class="row margin8">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="taxSetting">
                                        <div class="settings_Header row">
                                            <div class="col-lg-3 col-md-3">
                                                <div class="fixedHeaderText bp-pointer-cursor" ng-click="UserSettingModel.PriceAndTax.toogleSectionView('showTaxSetting');">
                                                    <span class="headerlabel">
                                                    <i class="fa fa-angle-down" ng-show="UserSettingModel.PriceAndTax.showTaxSetting" ></i>
                                                    <i class="fa fa-angle-right" ng-show="!UserSettingModel.PriceAndTax.showTaxSetting" ></i>
                                                    <span class="divider">|</span>
                                                    <span class="T2">{{ 'Tax_settings' | translate}}</span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="tax_Setting" ng-show="UserSettingModel.PriceAndTax.showTaxSetting">
                                            <div class="main_section row" >
                                                <div class="form">
                                                    <div class="row">
                                                        <div class="col-xs-12 col-md-5">
                                                            <div class="row margin8">
                                                                <div class="col-xs-12 col-md-5 margin8">
                                                                    <label>{{ 'Default_tax_labor' | translate}}</label>
                                                                </div>
                                                                <div class="col-xs-12 col-md-5">
                                                                    <select class="form-control" ng-model="UserSettingModel.PriceAndTax.PriceAndTaxData.defaultLaborTax" 
                                                                        ng-options="tax.id as tax.name for tax in UserSettingModel.PriceAndTax.PriceAndTaxMasterData.salesTaxList"></select>
                                                                </div>
                                                            </div>
                                                            <div class="row margin8">
                                                                <div class="col-xs-12 col-md-5 margin8">
                                                                    <label>{{ 'Default_tax_part' | translate}}</label>
                                                                </div>
                                                                <div class="col-xs-12 col-md-5">
                                                                    <select class="form-control" ng-model="UserSettingModel.PriceAndTax.PriceAndTaxData.defaultPartTax" 
                                                                        ng-options="tax.id as tax.name for tax in UserSettingModel.PriceAndTax.PriceAndTaxMasterData.salesTaxList"></select>
                                                                </div>
                                                            </div>
                                                            <div class="row margin8">
                                                                <div class="col-xs-12 col-md-5 margin8">
                                                                    <label>{{ 'Ordering_tax_rate' | translate}}</label>
                                                                </div>
                                                                <div class="col-xs-12 col-md-5">
                                                                    <select class="form-control" ng-model="UserSettingModel.PriceAndTax.PriceAndTaxData.orderingTaxRate" 
                                                                        ng-options="tax.id as tax.name for tax in UserSettingModel.PriceAndTax.PriceAndTaxMasterData.salesTaxList"></select>
                                                                </div>
                                                            </div>
                                                            <div class="row margin8">
                                                                <div class="col-xs-12 col-md-5 margin8">
                                                                    <label>{{ 'Default_tax_internal_service' | translate}}</label>
                                                                </div>
                                                                <div class="col-xs-12 col-md-5">
                                                                    <select class="form-control" ng-model="UserSettingModel.PriceAndTax.PriceAndTaxData.DefaultSalesTaxOnInternalService" 
                                                                        ng-options="tax.id as tax.name for tax in UserSettingModel.PriceAndTax.PriceAndTaxMasterData.salesTaxList"></select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-xs-12 col-md-6">
                                                            <div class="row margin8">
                                                                <div class="col-xs-12 col-md-6 margin8">
                                                                    <label>{{ 'Default_tax_vendor_item' | translate}}</label>
                                                                </div>
                                                                <div class="col-xs-12 col-md-4">
                                                                    <select class="form-control" ng-model="UserSettingModel.PriceAndTax.PriceAndTaxData.defaultVendorItemTax" 
                                                                        ng-options="tax.id as tax.name for tax in UserSettingModel.PriceAndTax.PriceAndTaxMasterData.salesTaxList"></select>
                                                                </div>
                                                            </div>
                                                            <div class="row margin8">
                                                                <div class="col-xs-12 col-md-6 margin8">
                                                                    <label>{{ 'Default_tax_fees' | translate}}</label>
                                                                </div>
                                                                <div class="col-xs-12 col-md-4">
                                                                    <select class="form-control" ng-model="UserSettingModel.PriceAndTax.PriceAndTaxData.defaultFeeTax" 
                                                                        ng-options="tax.id as tax.name for tax in UserSettingModel.PriceAndTax.PriceAndTaxMasterData.salesTaxList"></select>
                                                                </div>
                                                            </div>
                                                            <div class="row margin8">
                                                                <div class="col-xs-12 col-md-6 margin8">
                                                                    <label>{{ 'Default_tax_unit' | translate}}</label>
                                                                </div>
                                                                <div class="col-xs-12 col-md-4">
                                                                    <select class="form-control" ng-model="UserSettingModel.PriceAndTax.PriceAndTaxData.DefaultUnitTax" 
                                                                        ng-options="tax.id as tax.name for tax in UserSettingModel.PriceAndTax.PriceAndTaxMasterData.salesTaxList"></select>
                                                                </div>
                                                            </div>
                                                            <div class="row margin8" ng-if="!UserSettingModel.PriceAndTax.PriceAndTaxData.priceIncludeTax">
                                                                <div class="col-xs-12 col-md-6 margin8">
                                                                    <label>{{'Trade_tax_credit_can_not_exceed_unit_tax' | translate}}</label>
                                                                </div>
                                                                <div class="col-xs-12 col-md-4">
                                                                    <label class="bp-switch margin8">
                                                                        <input ng-model="UserSettingModel.PriceAndTax.PriceAndTaxData.TradeTaxCreditCanNotExceedUnitTax" type="checkbox"/>
                                                                        <div class="bp-slider round"></div>
                                                                    </label>
                                                                </div>
                                                            </div>
                                                            <div class="row margin8">
                                                                <div class="col-xs-12 col-md-6 margin8">
                                                                    <label>{{'Accrue_trade_tax_until_unit_is_sold' | translate}}</label>
                                                                </div>
                                                                <div class="col-xs-12 col-md-4">
                                                                    <label class="bp-switch margin8">
                                                                        <input ng-model ="UserSettingModel.PriceAndTax.PriceAndTaxData.AccrueTradeTaxUntilUnitSold" type="checkbox" 
                                                                            ng-change="UserSettingModel.PriceAndTax.setDefaultTradeTaxCategory()"/>
                                                                        <div class="bp-slider round"></div>
                                                                    </label>
                                                                </div>
                                                            </div>
                                                            <div ng-if="UserSettingModel.PriceAndTax.PriceAndTaxData.AccrueTradeTaxUntilUnitSold">
                                                                <div class="row margin8">
                                                                    <div class="col-xs-12 col-md-6 margin8">
                                                                        <label>{{'Trade_tax_pending_sale_category' | translate}}</label>
                                                                    </div>
                                                                    <div class="col-xs-12 col-md-4">
                                                                        <select class="form-control" ng-model="UserSettingModel.PriceAndTax.PriceAndTaxData.TradeTaxPendingSaleCategory" 
                                                                            ng-options="taxCategory.Id as taxCategory.Name for taxCategory in UserSettingModel.PriceAndTax.taxCategoryList"></select>
                                                                    </div>
                                                                </div>
                                                                <div class="row margin8">
                                                                    <div class="col-xs-12 col-md-6 margin8">
                                                                        <label>{{'Trade_tax_liability_category' | translate}}</label>
                                                                    </div>
                                                                    <div class="col-xs-12 col-md-4">
                                                                        <select class="form-control" ng-model="UserSettingModel.PriceAndTax.PriceAndTaxData.TradeTaxLiabilityCategory" 
                                                                            ng-options="taxCategory.Id as taxCategory.Name for taxCategory in UserSettingModel.PriceAndTax.taxCategoryList"></select>
                                                                    </div>
                                                                </div>
                                                                <div class="row margin8">
                                                                    <div class="col-xs-12 col-md-6 margin8">
                                                                        <label>{{'Trade_tax_expense_category' | translate}}</label>
                                                                    </div>
                                                                    <div class="col-xs-12 col-md-4">
                                                                        <select class="form-control" ng-model="UserSettingModel.PriceAndTax.PriceAndTaxData.TradeTaxExpenseCategory" 
                                                                            ng-options="taxCategory.Id as taxCategory.Name for taxCategory in UserSettingModel.PriceAndTax.taxCategoryList"></select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Account Type Tab -->
                                    <div class="account-type">
                                        <div class="settings_Header row">
                                            <div class="col-lg-3 col-md-3">
                                                <div class="fixedHeaderText bp-pointer-cursor" ng-click="UserSettingModel.PriceAndTax.toogleSectionView('showAccountType');">
                                                    <span class="headerlabel">
                                                    <i class="fa fa-angle-down" ng-show="UserSettingModel.PriceAndTax.showAccountType" ></i>
                                                    <i class="fa fa-angle-right" ng-show="!UserSettingModel.PriceAndTax.showAccountType" ></i>
                                                    <span class="divider">|</span>
                                                   <span class="T2">{{ 'Account_Type' | translate}}s</span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="account-type-setting   " ng-show="UserSettingModel.PriceAndTax.showAccountType">
                                            <div class="main_section row no-border">
                                                <div class="form">
                                                    <div class="row margin8 MB0">
                                                        <table class="account-type-table-setting">
                                                            <col width="30%"  />
                                                            <col width="20%"  />
                                                             <col width="30%"  />
                                                            <col width="10%"  />
                                                            <col width="7%"  />
                                                            <col width="3%"  />
                                                            <thead>
                                                                <tr>
                                                                      <th class="H300 bp-first-letter-capitalize line-height-medium">
                                                                        {{'Account_Type' | translate}}
                                                                    </th>
                                                                    <th class="H300 bp-first-letter-capitalize line-height-medium">
                                                                        {{'Applies_to' | translate}}
                                                                    </th>
                                                                    <th class="H300 bp-first-letter-capitalize line-height-medium">
                                                                        {{'Tooltip_Tax_Exemptions' | translate}}
                                                                    </th>
                                                                    <th class="H300 bp-first-letter-capitalize line-height-medium">
                                                                        {{'Default_Label' | translate}}
                                                                    </th>
                                                                    <th class="H300 bp-first-letter-capitalize line-height-medium">
                                                                        {{'Label_Active' | translate}}
                                                                    </th>
                                                                    <th>
                                                                    </th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr ng-repeat = "accountRec in UserSettingModel.AccountTypeMasterData track by $index">
                                                                    <td class="H200 line-height-normal">
                                                                        {{accountRec.AccountType}}
                                                                    </td>
                                                                    <td class="text-small line-height-normal">
                                                                        {{accountRec.AppliesTo}}
                                                                    </td>
                                                                    <td class="text-small line-height-normal">
                                                                        {{accountRec.TaxExemptions}}
                                                                    </td>
                                                                    <td>
                                                                        <label class="bp-switch">
                                                                            <input type="checkbox" ng-model="accountRec.IsDefault" ng-click = "UserSettingModel.preventDefaultAction($event)" />
                                                                            <div class="bp-slider round"></div>
                                                                        </label>
                                                                    </td>
                                                                    <td>
                                                                        <label class="bp-switch">
                                                                            <input type="checkbox" ng-model="accountRec.IsActive" ng-click = "UserSettingModel.preventDefaultAction($event)" />
                                                                            <div class="bp-slider round"></div>
                                                                        </label>
                                                                    </td>
                                                                    <td class="text-right">
                                                                        <i ng-include="'{!Application_Images}/Icons/edit_filled.svg'" ng-click = "UserSettingModel.openAddEditAccountTypeModalWindow(accountRec.Id)" data-toggle="tooltip" title="{{ 'Edit_Label' | translate }} " class="gray_DDDDDD blue_Fill bp-pointer-cursor"></i>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                        <button class="bp-btn bp-btn-normal add-account-type-btn text-uppercase" ng-click = "UserSettingModel.openAddEditAccountTypeModalWindow()">{{ 'Add_Account_Type' | translate}}</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="priceSetting">
                                        <div class="settings_Header row">
                                            <div class="col-lg-3 col-md-3">
                                                <div class="fixedHeaderText bp-pointer-cursor" ng-click="UserSettingModel.PriceAndTax.toogleSectionView('showPriceSetting');">
                                                    <span class="headerlabel">
                                                    <i class="fa fa-angle-down" ng-show="UserSettingModel.PriceAndTax.showPriceSetting" ></i>
                                                    <i class="fa fa-angle-right" ng-show="!UserSettingModel.PriceAndTax.showPriceSetting" ></i>
                                                    <span class="divider">|</span>
                                                    <span class="T2">{{ 'Price_settings' | translate}}</span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="price_Setting" ng-show="UserSettingModel.PriceAndTax.showPriceSetting">
                                            <div class="main_section row" >
                                                <div class="form">
                                                    <div class="row margin8">
                                                        <div class="col-md-2 margin8">
                                                            <label>{{ 'Prices_include_tax' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <select class="form-control" ng-model="UserSettingModel.PriceAndTax.PriceAndTaxData.priceIncludeTax" 
                                                                ng-options="item.Value as item.Label for item in UserSettingModel.PriceAndTax.PriceIncludeTax"></select>
                                                        </div>
                                                        <div class="col-md-3 col-md-offset-1">
                                                            <label class="margin8">{{ 'Default_price_level' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <select class="form-control" ng-model="UserSettingModel.PriceAndTax.PriceAndTaxData.defaultPriceLevel" 
                                                                ng-options="pricelevel.id as pricelevel.name for pricelevel in UserSettingModel.PriceAndTax.PriceAndTaxMasterData.priceLevelList"></select>
                                                        </div>
                                                    </div>
                                                    <div class="row margin8">
                                                        <div class="col-md-2 margin8">
                                                            <label>{{ 'Default_price_level_internal_service' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <select class="form-control" ng-model="UserSettingModel.PriceAndTax.PriceAndTaxData.DefaultPriceLevelOnInternalService" 
                                                                ng-options="pricelevel.id as pricelevel.name for pricelevel in UserSettingModel.PriceAndTax.PriceAndTaxMasterData.priceLevelList"></select>
                                                        </div>
                                                        <div class="col-md-3 col-md-offset-1">
                                                            <label class="margin8">{{ 'Rounding_message' | translate}}<strong style="font-weight: 800;">X</strong>{{ 'cents' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <div class="form_fields left">
                                                                <price-only-input id-value = "roundedCashPayment"
                                                                    class-value = "form-control"
                                                                    place-holder-value = ""
                                                                    max-length = "2"
                                                                    rel-value="msrpId"
                                                                    precision-length = "0"
                                                                    input-value = "UserSettingModel.PriceAndTax.PriceAndTaxData.CashPaymentRoundingFactor"
                                                                    input-model = "UserSettingModel"
                                                                    packaged="true"/>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row margin8">
                                                        <div class="col-md-2 margin8">
                                                            <label>{{ 'Default_environmental_fee' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <div class="searchInputArea feeSearchInputArea" ng-class="{'showingOverlay' : UserSettingModel.PriceAndTax.isFocused}">
                                                                <input type="text" class="searchInput" placeholder="{{ 'Search_fee' | translate }}"
                                                                    ng-focus="UserSettingModel.PriceAndTax.isFocused = true;"
                                                                    ng-blur="UserSettingModel.PriceAndTax.isFocused = false; UserSettingModel.PriceAndTax.resetEnvFee();" 
                                                                    ng-keyup="UserSettingModel.PriceAndTax.changeSeletedEnvFee($event)" 
                                                                    ng-model="UserSettingModel.FeeNameStr"/>
                                                                <div class="searchResultOverlay" id="autocompleteScrollDiv">
                                                                    <ul>
                                                                        <li ng-repeat="fee in UserSettingModel.PriceAndTax.FilteredEnvFeeList = (UserSettingModel.PriceAndTax.ActiveFeeList | filter:{'ItemDesc' : UserSettingModel.FeeNameStr})"
                                                                            ng-class="{'selected-row': $index == UserSettingModel.currentSelectedEnvFeeIndex}" id="tag_{{$index}}"
                                                                            ng-mousedown="UserSettingModel.PriceAndTax.selectFee(fee)">
                                                                            <div class="fullName">{{fee.Code}} - {{fee.Description}}</div>
                                                                        </li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div ng-if="CompanyLocale == 'Australia'">
                                                            <div class="col-md-3 col-md-offset-1">
                                                                <label class="margin8">{{ 'Stamp_duty_rate' | translate}}</label>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <price-only-input id-value = "stampDutyRate"
                                                                    class-value = "form-control small width200"
                                                                    max-length = "3"
                                                                    max-value = "100"
                                                                    precision-length = "2" 
                                                                    allowNegative = "false"
                                                                    input-value = "UserSettingModel.PriceAndTax.PriceAndTaxData.StampDutyRate" 
                                                                    input-model = "UserSettingModel"
                                                                    />
                                                                <span class="percentIcon">%</span>  
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Shop Settings Start -->
                                    <div ng-if="UserSettingModel.isLoadTechScheduling">
                                        <div class="settings_Header row">
                                            <div class="col-lg-3 col-md-3">
                                                <div class="fixedHeaderText bp-pointer-cursor" ng-click="UserSettingModel.PriceAndTax.toogleSectionView('showShopSettings');">
                                                    <span class="headerlabel">
                                                    <i class="fa fa-angle-down" ng-show="UserSettingModel.PriceAndTax.showShopSettings" ></i>
                                                    <i class="fa fa-angle-right" ng-show="!UserSettingModel.PriceAndTax.showShopSettings" ></i>
                                                    <span class="divider">|</span>
                                                    <span class="T2">{{ 'Shop_settings' | translate}}</span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="price_Setting" ng-show="UserSettingModel.PriceAndTax.showShopSettings">
                                            <div class="main_section row" >
                                                <div class="form">
                                                    <div class="row margin8">
                                                        <div class="col-md-2 margin8">
                                                            <label>{{ 'Default_workshop_hours' | translate}}</label>
                                                        </div>
                                                    </div>
                                                    <div class="row margin8 MB0">
                                                        <div class="col-md-2 col-md-offset-4"><span class="PL16 bp-font-12 bp-bold-font">{{ 'Label_From' | translate }}</span></div>
                                                        <div class="col-md-2"><span class="PL16 bp-font-12 bp-bold-font">{{ 'Label_To' | translate }}</span></div>
                                                    </div>
                                                    <div class="row margin8" ng-repeat="shopSettingItem in UserSettingModel.PriceAndTax.PriceAndTaxData.shopSettingConfiguration" ng-init="shopSettingLineItemIndex = $index" >
                                                        <div class="col-md-2 margin8">
                                                            <label>{{  shopSettingItem.Day | translate}}</label>
                                                        </div>
                                                        <div class="col-md-2 PT8">
                                                            <span class="bp-switchLabel text-uppercase">{{ 'Label_No' | translate }}</span>
                                                            <label class="bp-switch">
                                                                <input type="checkbox" ng-model="shopSettingItem.IsWorking" ng-change="UserSettingModel.resetToDefaultTime(shopSettingLineItemIndex)"/>
                                                                <div class="bp-slider round"></div>
                                                            </label>
                                                            <span class="bp-switchLabel text-uppercase">{{ 'Label_Yes' | translate }}</span>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <select class="form-control" ng-model="shopSettingItem.FromTime" ng-disabled="!shopSettingItem.IsWorking" ng-change="UserSettingModel.validateTime(shopSettingLineItemIndex,'FromTime')"
                                                                ng-options="timeInstance for timeInstance in UserSettingModel.PriceAndTax.timePeriodInterval"></select>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <select class="form-control" ng-model="shopSettingItem.ToTime" ng-disabled="!shopSettingItem.IsWorking" ng-change="UserSettingModel.validateTime(shopSettingLineItemIndex,'ToTime')"
                                                                ng-options="timeInstance for timeInstance in UserSettingModel.PriceAndTax.timePeriodInterval"></select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="Other_Settings">
                                        <div class="settings_Header row">
                                            <div class="col-lg-3 col-md-3">
                                                <div class="fixedHeaderText bp-pointer-cursor" ng-click="UserSettingModel.PriceAndTax.toogleSectionView('showOtherSetting');">
                                                    <span class="headerlabel">
                                                    <i class="fa fa-angle-down" ng-show="UserSettingModel.PriceAndTax.showOtherSetting" ></i>
                                                    <i class="fa fa-angle-right" ng-show="!UserSettingModel.PriceAndTax.showOtherSetting" ></i>
                                                    <span class="divider">|</span>
                                                    <span class="T2">{{ 'Other_settings' | translate}}</span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="price_Setting" ng-show="UserSettingModel.PriceAndTax.showOtherSetting">
                                            <div class="main_section row" >
                                                <div class="form">
                                                    <div class="row margin8">
                                                        <div class="col-md-2 margin8">
                                                            <label>{{ 'Part_Aging_Periods' | translate}}</label>
                                                        </div>
                                                    </div>
                                                    <div class="row margin8">
                                                        <div class="col-md-2 margin8">
                                                            <label class="p_l_50">{{ 'Period_1' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-2 Profile_pic">
                                                            <div class="form_fields left">
                                                                <numbers-only 
                                                                    class-value="form-control"
                                                                    ng-class-name="{'redborder': !UserSettingModel.isPeriod1Valid}"
                                                                    placeHolderValue=""
                                                                    include-zero = "false"
                                                                    precision-length="0"
                                                                    include-blank = "true"
                                                                    input-model-value="UserSettingModel.PriceAndTax.PriceAndTaxData.Period1" 
                                                                    blur-value = "UserSettingModel.validatePeriod1Field()"/>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-1 daysPadding">
                                                            <span class="text-lowercase">{{ 'Label_Days' | translate}}</span>
                                                        </div>
                                                    </div>
                                                    <div class="row margin8">
                                                        <div class="col-md-2 margin8">
                                                            <label class="p_l_50">{{ 'Period_2' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-2 Profile_pic">
                                                            <div class="form_fields left">
                                                                <numbers-only 
                                                                    ng-class-name="{'redborder': !UserSettingModel.isPeriod2Valid}" 
                                                                    class-value="form-control"
                                                                    placeHolderValue=""
                                                                    precision-length="0"
                                                                    include-zero = "false"
                                                                    include-blank = "true"
                                                                    input-model-value="UserSettingModel.PriceAndTax.PriceAndTaxData.Period2" 
                                                                    blur-value = "UserSettingModel.validatePeriod2Field()"/>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-1 daysPadding">
                                                            <span class="text-lowercase">{{ 'Label_Days' | translate}}</span>
                                                        </div>
                                                    </div>
                                                    <div class="row margin8">
                                                        <div class="col-md-2 margin8">
                                                            <label class="p_l_50">{{ 'Period_3' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-2 Profile_pic">
                                                            <div class="form_fields left">
                                                                <numbers-only 
                                                                    class-value="form-control"
                                                                    ng-class-name="{'redborder': !UserSettingModel.isPeriod3Valid}"
                                                                    placeHolderValue=""
                                                                    precision-length="0"
                                                                    include-blank = "true"
                                                                    include-zero = "false"
                                                                    input-model-value="UserSettingModel.PriceAndTax.PriceAndTaxData.Period3" 
                                                                    blur-value = "UserSettingModel.validatePeriod3Field()"/>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-1 daysPadding">
                                                            <span class="text-lowercase">{{ 'Label_Days' | translate}}</span>
                                                        </div>
                                                    </div>
                                                    <div class="row margin8">
                                                        <div class="col-md-2 margin8">
                                                            <label class="p_l_50">{{ 'Period_4' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-2 Profile_pic">
                                                            <div class="form_fields left">
                                                                <input ng-class="{'redborder': !UserSettingModel.isPeriod3Valid}" ng-disabled="true" class="form-control" type="text"
                                                                    ng-model="UserSettingModel.PriceAndTax.PriceAndTaxData.Period4" />
                                                            </div>
                                                        </div>
                                                        <div class="col-md-1 daysPadding">
                                                            <span class="text-lowercase">{{ 'Label_Days' | translate}}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="Shop_Supplies">
                                        <div class="settings_Header row">
                                            <div class="col-lg-3 col-md-3">
                                                <div class="fixedHeaderText bp-pointer-cursor" ng-click="UserSettingModel.PriceAndTax.toogleSectionView('showShopSupplies');">
                                                    <span class="headerlabel">
                                                    <i class="fa fa-angle-down" ng-show="UserSettingModel.PriceAndTax.showShopSupplies"></i>
                                                    <i class="fa fa-angle-right" ng-show="!UserSettingModel.PriceAndTax.showShopSupplies"></i>
                                                    <span class="divider">|</span>
                                                    <span class="T2">{{ 'Shop_Supplies' | translate}}</span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="price_Setting" ng-show="UserSettingModel.PriceAndTax.showShopSupplies">
                                            <div class="main_section row" >
                                                <div class="form">
                                                    <div class="row margin8">
                                                        <div class="col-md-2 margin8">
                                                            <label class="p_l_50">{{ 'Calculation_method' | translate}}</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <select class="form-control" 
                                                                ng-model="UserSettingModel.PriceAndTax.PriceAndTaxData.CalculationMethod" 
                                                                ng-options="item.Value as item.Label for item in UserSettingModel.PriceAndTax.ShopSuppliesList"
                                                                ng-change="UserSettingModel.resetSuppliesRateValue()">
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div ng-if="UserSettingModel.PriceAndTax.PriceAndTaxData.CalculationMethod != 'Not Calculated'">
                                                        <div class="row margin8">
                                                            <div class="col-md-2 margin8">
                                                                <label class="p_l_50">{{ 'Supplies_rate' | translate}}</label>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <div class="form_fields left">
                                                                    <div ng-if="UserSettingModel.PriceAndTax.PriceAndTaxData.CalculationMethod == 'Percentage of Labor Total'">
                                                                        <span class="currency_display bp-grey">%</span>
                                                                        <price-only-input id-value = "SuppliesRate"
                                                                            class-value = "form-control small width200 padding22"
                                                                            max-length = "3"
                                                                            max-value = "100"
                                                                            add-red-border="!UserSettingModel.isSuppliesRateValid"
                                                                            precision-length = "2" 
                                                                            allowNegative = "false"
                                                                            include-zero = "false"
                                                                            input-value = "UserSettingModel.PriceAndTax.PriceAndTaxData.SuppliesRate" 
                                                                            input-model = "UserSettingModel" />
                                                                    </div>
                                                                    <div ng-if="UserSettingModel.PriceAndTax.PriceAndTaxData.CalculationMethod == 'Fixed Amount per Hour'">
                                                                        <span class="currency_display bp-grey">$</span>
                                                                        <price-only-input id-value = "SuppliesRate"
                                                                            class-value = "form-control small width200 padding22"
                                                                            max-length = "6"
                                                                            precision-length = "2" 
                                                                            add-red-border="!UserSettingModel.isSuppliesRateValid"
                                                                            allowNegative = "false"
                                                                            include-zero = "false"
                                                                            input-value = "UserSettingModel.PriceAndTax.PriceAndTaxData.SuppliesRate" 
                                                                            input-model = "UserSettingModel" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row margin8">
                                                            <div class="col-md-2 margin8">
                                                                <label class="p_l_50">{{ 'Maximum_per_invoice' | translate}}</label>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <div class="form_fields left">
                                                                    <span class="currency_display bp-grey">$</span>
                                                                    <price-only-input id-value = "stampDutyRate"
                                                                        class-value = "form-control small width200 padding22"
                                                                        max-length = "6"
                                                                        precision-length = "2" 
                                                                        allowNegative = "false"
                                                                        add-red-border="!UserSettingModel.isMaximumPerInvoiceValid"
                                                                        include-zero = "false"
                                                                        input-value = "UserSettingModel.PriceAndTax.PriceAndTaxData.MaximumPerInvoice" 
                                                                        input-model = "UserSettingModel" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row margin8">
                                                            <div class="col-md-2 margin8">
                                                                <label class="p_l_50">{{ 'Applicable_fee' | translate}}</label>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <div class="searchInputArea feeSearchInputArea" ng-class="{'showingOverlay' : UserSettingModel.PriceAndTax.isApplicableFeeFocused}">
                                                                    <input type="text" class="searchInput" placeholder="{{ 'Search_fee' | translate }}"
                                                                        ng-focus="UserSettingModel.PriceAndTax.isApplicableFeeFocused = true;"
                                                                        ng-blur="UserSettingModel.PriceAndTax.isApplicableFeeFocused = false; UserSettingModel.PriceAndTax.resetApplicableFee();" 
                                                                        ng-keyup="UserSettingModel.PriceAndTax.changeSeletedApplicableFee($event)" 
                                                                        ng-model="UserSettingModel.ApplicableFeeStr"
                                                                        ng-class="{'redborder': !UserSettingModel.isApplicableFeeValid}"/>
                                                                    <div class="searchResultOverlay" id="autocompleteApplicableFeeScrollDiv">
                                                                        <ul>
                                                                            <li ng-repeat="Applicablefee in UserSettingModel.PriceAndTax.FilterApplicableFeeList = (UserSettingModel.PriceAndTax.AllActiveFeeList | filter:{'ItemDesc' : UserSettingModel.ApplicableFeeStr})"
                                                                                ng-class="{'selected-row': $index == UserSettingModel.currentSelectedApplicableFeeIndex}" id="ApplicableFee_{{$index}}"
                                                                                ng-mousedown="UserSettingModel.PriceAndTax.selectApplicableFee(Applicablefee)">
                                                                                <div class="fullName">{{Applicablefee.Code}} - {{Applicablefee.Description}}</div>
                                                                            </li>
                                                                        </ul>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row margin8">
                                                            <div class="col-md-2 margin8">
                                                                <label class="p_l_50">{{ 'Itemized_by_labor_code' | translate}}</label>
                                                            </div>
                                                            <div class="col-md-2 margin8">
                                                                <label class="bp-switch .marginLeft8">
                                                                    <input ng-model ="UserSettingModel.PriceAndTax.PriceAndTaxData.ItemizedByLaborCode" ng-checked="UserSettingModel.PriceAndTax.PriceAndTaxData.ItemizedByLaborCode"
                                                                        type="checkbox" />
                                                                    <div class="bp-slider round"></div>
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="disclaimers">
                                        <div class="settings_Header row">
                                            <div class="col-lg-3 col-md-3">
                                                <div class="fixedHeaderText bp-pointer-cursor" ng-click="UserSettingModel.PriceAndTax.toogleSectionView('showdisclaimers');">
                                                    <span class="headerlabel">
                                                    <i class="fa fa-angle-down" ng-show="UserSettingModel.PriceAndTax.showdisclaimers" ></i>
                                                    <i class="fa fa-angle-right" ng-show="!UserSettingModel.PriceAndTax.showdisclaimers" ></i>
                                                    <span class="divider">|</span>
                                                    <span class="T2">{{ 'Disclaimers' | translate}}</span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="disclaimers_Setting" ng-show="UserSettingModel.PriceAndTax.showdisclaimers">
                                            <div class="main_section row" >
                                                <div class="form">
                                                    <div class="row margin8">
                                                        <div class="col-xs-offset-10">
                                                            <label>{{ 'Signature_line' | translate}}</label>
                                                        </div>
                                                    </div>
                                                    <div class="row margin8">
                                                        <div class="col-sm-2 col-xs-12 marginLeft8">
                                                            <label>{{ 'Customer_invoice' | translate}}</label>
                                                        </div>
                                                        <div class="col-sm-8 col-xs-10">
                                                            <textarea name="message" rows="5" class="WarrantyTextArea" maxlength="5000" 
                                                                ng-model="UserSettingModel.PriceAndTax.PriceAndTaxData.CustomerInvoiceWarrantyText" />
                                                        </div>
                                                        <div class="col-sm-2 col-xs-2 padding2">
                                                            <label class="bp-switch .marginLeft8">
                                                                <input type="checkbox"
                                                                    ng-checked="UserSettingModel.PriceAndTax.PriceAndTaxData.IsSignatureLineforCustomerInvoice" 
                                                                    ng-click = "UserSettingModel.applyFilter('Customer_Invoice')"  />
                                                                <div class="bp-slider round"></div>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="row margin8">
                                                        <div class="col-sm-2 col-xs-12 marginLeft8">
                                                            <label>{{ 'Service_job' | translate }}</label>
                                                        </div>
                                                        <div class="col-sm-8 col-xs-10">
                                                            <textarea name="message" rows="5" cols="30" class="WarrantyTextArea" maxlength="5000" 
                                                                ng-model="UserSettingModel.PriceAndTax.PriceAndTaxData.ServiceJobWarrantyText" />
                                                        </div>
                                                        <div class="col-sm-2 col-xs-2 padding2">
                                                            <label class="bp-switch .marginLeft8">
                                                                <input type="checkbox"
                                                                    ng-checked="UserSettingModel.PriceAndTax.PriceAndTaxData.IsSignatureLineforServiceJob" 
                                                                    ng-click = "UserSettingModel.applyFilter('Service_Job')"  />
                                                                <div class="bp-slider round"></div>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="row margin8">
                                                        <div class="col-sm-2 col-xs-12 marginLeft8">
                                                            <label>{{ 'Order_deposit' | translate}}</label>
                                                        </div>
                                                        <div class="col-sm-8 col-xs-10">
                                                            <textarea name="message" rows="5" cols="30" class="WarrantyTextArea" maxlength="5000" 
                                                                ng-model="UserSettingModel.PriceAndTax.PriceAndTaxData.OrderDepositWarrantyText"/>
                                                        </div>
                                                        <div class="col-sm-2 col-xs-2 padding2">
                                                            <label class="bp-switch .marginLeft8">
                                                                <input type="checkbox"
                                                                    ng-checked="UserSettingModel.PriceAndTax.PriceAndTaxData.IsSignatureLineforOrderDeposit" 
                                                                    ng-click = "UserSettingModel.applyFilter('Order_Deposit')"  />
                                                                <div class="bp-slider round"></div>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="row margin8">
                                                        <div class="col-sm-2 col-xs-12 marginLeft8">
                                                            <label>{{ 'Deal_documents' | translate}}</label>
                                                        </div>
                                                        <div class="col-sm-8 col-xs-10">
                                                            <textarea name="message" rows="5" class="WarrantyTextArea" maxlength="5000" 
                                                                ng-model="UserSettingModel.PriceAndTax.PriceAndTaxData.DealDocumentsWarrantyText" />
                                                        </div>
                                                        <div class="col-sm-2 col-xs-2 padding2">
                                                            <label class="bp-switch .marginLeft8">
                                                                <input type="checkbox"
                                                                    ng-checked="UserSettingModel.PriceAndTax.PriceAndTaxData.IsSignatureLineforDealDocuments" 
                                                                    ng-click = "UserSettingModel.applyFilter('Deal_Document')"  />
                                                                <div class="bp-slider round"></div>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="row margin8">
                                                        <div class="col-sm-2 col-xs-12 marginLeft8">
                                                            <label>{{ 'Receipts' | translate}}</label>
                                                        </div>
                                                        <div class="col-sm-8 col-xs-10">
                                                            <textarea name="message" rows="5" class="WarrantyTextArea" maxlength="5000" 
                                                                ng-model="UserSettingModel.PriceAndTax.PriceAndTaxData.SalesReceiptWarrantyText" />
                                                        </div>
                                                        <div class="col-sm-2 col-xs-2 padding2">
                                                            <label class="bp-switch .marginLeft8">
                                                                <input type="checkbox"
                                                                    ng-checked="UserSettingModel.PriceAndTax.PriceAndTaxData.IsSignatureLineforSalesReceipt" 
                                                                    ng-click = "UserSettingModel.applyFilter('Receipts')"  />
                                                                <div class="bp-slider round"></div>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="main_section row">
                                        <span>
                                        <button class="grayBtn btn btn-default btnCancel pull-right margin8 text-uppercase"  ng-click="UserSettingModel.MoveToState('UserSetting',{Id:  'Home'});">{{UserSettingModel.PriceAndTax.isPriceAndTaxDataSaved == false ? ('Cancel_Label' |translate) : ('Back' | translate)}}</button>
                                        <button class="btn btn-default greenBtn pull-right margin8 text-uppercase applyDisable" ng-disabled = "!UserSettingModel.IsPeriodValid()" ng-click="UserSettingModel.PriceAndTax.savePriceAndTaxData();">{{ 'Apply_settings' | translate}}</button>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div ng-show="UserSettingModel.Support.showSupportSection">
                            <div class="screen_section row">
                                <div class="col-sm-12">
                                    <div class="row marginbottom16">
                                        <div class="col-lg-4 col-md-4">
                                            <i class="fa fa-life-ring Plr5 FC7 F18 bigIcon"></i>
                                            <span class="gen_heading T2 removeborderbottom">{{ 'Support' | translate}}</span>
                                        </div>
                                    </div>
                                    <div class="T3 removeuppercase subheadingcolor">
                                        {{ 'Get_help_support_others' | translate}}
                                    </div>
                                    <div class = "supportDiv">
                                        <div class="settings_Header row">
                                            <div class="col-lg-3 col-md-3">
                                                <div class="fixedHeaderText">
                                                    <span class="headerlabel">
                                                    <i class="fa fa-angle-down" 
                                                        ng-show="UserSettingModel.Support.showTrialAccountSection" 
                                                        ng-click="UserSettingModel.Support.toggleTrialAccountSectionView();"></i>
                                                    <i class="fa fa-angle-right" 
                                                        ng-show="!UserSettingModel.Support.showTrialAccountSection"  
                                                        ng-click="UserSettingModel.Support.toggleTrialAccountSectionView();"></i>
                                                    <span class="divider">|</span>
                                                    <span class="T2" >{{ 'Help_and_community' | translate}}</span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form" ng-show="UserSettingModel.Support.showTrialAccountSection" >
                                            <div class="row margin8">
                                                <div class="col-sm-12 margin8">
                                                    <span class = "col-md-8 ">
                                                    {{ 'Join_blackPurl_community_messsage' | translate}}
                                                    </span>
                                                    <a class="btn btn-default  margin8 addmoreinfoBtn alignbutton"  style="width: auto;" href="{{UserSettingModel.communityURL}}" target="_blank" >{{ 'Go_to_community' | translate}}</a>
                                                </div>
                                            </div>
                                            <div class="row margin8">
                                                <div class="col-sm-12 margin8">
                                                    <span class = "col-md-8 ">
                                                    {{ 'Get_help_from_community' | translate}}
                                                    </span>
                                                    <a class="btn btn-default  margin8 addmoreinfoBtn alignbutton" style="width: auto;" href="{{UserSettingModel.communityQuestionURL}}" target="_blank">{{ 'Ask_a_question' | translate}}</a>
                                                </div>
                                            </div>
                                            <div class="row margin8">
                                                <div class="col-sm-12 margin8">
                                                    <span class = "col-md-8 ">
                                                    {{ 'Raise_support_ticket_message' | translate}}
                                                    </span>
                                                    <a class="btn btn-default  margin8 addmoreinfoBtn alignbutton" style="width: auto;" href="{{UserSettingModel.communityCaseURL}}" target="_blank">{{ 'Contact_support' | translate}}</a>
                                                </div>
                                            </div>
                                            <div class="row margin8">
                                                <div class="col-sm-12 margin8">
                                                    <span class = "col-md-8 T7">
                                                    </span>
                                                    <button class="grayBtn btn btn-default btnCancel margin8" style="width: auto;" ng-click="UserSettingModel.MoveToState('UserSetting',{Id:  'Home'});">{{ 'Cancel_Label' | translate}}</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="add-account-type" class="modal fade modal-container profitability-modal-window" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content col-xs-12 P0">
                    <div class="modal-body">
                       <header>
                            <label class="line-height-xlarge H600 M0 bp-first-letter-capitalize" ng-if="!UserSettingModel.AccountTypeId">{{ 'Add_Account_Type' | translate}}</label>
                            <label class="line-height-xlarge H600 M0 bp-first-letter-capitalize" ng-if="UserSettingModel.AccountTypeId">{{ 'Edit_Account_Type' | translate}}</label>
                        </header>
                       <section class="section-container tax-exmp-container">
                            <div class="account-type-container">
                                <label class="H300">{{'Account_type_name' | translate}}</label>
                                <div class = "bp-autocomplete-Wrapper autocomplete_v2">
                                     <input  type="text" id="account-type-input" class="bp-autocomplete-input  bp-input-text  manage-long-salesperson-person" placeholder="{{ 'Define_a_name' | translate }}"
                                        ng-class="{'bp-redborder' : UserSettingModel.AccountTypeValidationModal['AccountType']['isError'] == true}"
                                        ng-model = "UserSettingModel.AccountTypeJson.AccountType" autocomplete="off"
                                        maxlength="20"
                                        ng-blur = "UserSettingModel.validateFieldWithKey('AccountType')"
                                        />
                                </div>
                            </div>
                            <div class="account-type-container">
                                <label class="H300">{{'Applies_to' | translate}}</label> 
                                <div class = "bp-autocomplete-Wrapper autocomplete_v2">
                                    <span class = "bp-autocomplete-image-icon">
                                     <i ng-include = "'{!Application_Images}/Icons/arrowDown.svg'" class="bp-blue bp-cursor-pointer svg_width_2px" ng-click= "UserSettingModel.showAppliesToDropDown = true; UserSettingModel.PriceAndTax.closeAutocomplete('applies-to-input')"></i>
                                    </span>
                                    <input  type="text" id="applies-to-input" class="bp-autocomplete-input bp-cursor-pointer bp-input-text  manage-long-salesperson-person" placeholder="{{'Please_select' | translate }}"
                                        autocomplete="off" ng-model = "UserSettingModel.AccountTypeJson.AppliesTo"
                                        ng-focus = "UserSettingModel.showAppliesToDropDown = true;" ng-blur = "UserSettingModel.showAppliesToDropDown = false;UserSettingModel.validateFieldWithKey('AppliesTo')"
                                        ng-class="{'bp-redborder' : UserSettingModel.AccountTypeValidationModal['Appliesto']['isError'] == true}"
                                        ng-disabled = "UserSettingModel.AccountTypeJson.IsDefault || (!UserSettingModel.AccountTypeJson.IsUpdatable && UserSettingModel.AccountTypeId)"
                                        ng-keyup="UserSettingModel.keyPressNavigationOnDropdownElements($event, 'applies-to-drop-down-div', 'appliesto',  UserSettingModel.AppliesToList)"
                                        readonly="readonly"/>                        
                                    <div class = "bp-autocomplete-dropdown-wrapper" ng-if="UserSettingModel.showAppliesToDropDown" id = "applies-to-drop-down-div">
                                        <ul>
                                            <li ng-repeat = "appliesToRec in UserSettingModel.AppliesToList" id = "appliesto_{{$index}}"
                                                ng-class="{'selected-row': $index == UserSettingModel.currentDropDownIndex}"
                                                ng-mousedown = "UserSettingModel.setAppliesTo(appliesToRec.Name)">
                                                <div class="form-group-info col-xs-12 P0">
                                                    <span >{{appliesToRec.Name}}</span>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="tax-exem-container">
                                <label class="H300 MB21">Select the individual sales taxes the account type is exempt from:</label>
                                <table class="tax-exem-table">
                                    <col width="10%"  />
                                    <col width="20%"  />
                                    <col width="10%"  />
                                    <col width="60%"  />
                                    <thead>
                                        <tr>
                                            <th class="text-uppercase">exempt</th>
                                            <th class="text-uppercase">tax name</th>
                                            <th class="text-uppercase">tax rate</th>
                                            <th class="text-uppercase">Applies to</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-class = "{'tax-exmp-odd' : $index % 2 == 0}" ng-repeat = "taxExmpRec in UserSettingModel.AccountTypeJson.TaxExemptionsList">
                                            <td>
                                                <input class="dummy-checkbox-input" type = "checkbox" id="checkbox-{{$index}}" 
                                                    ng-change="UserSettingModel.updateSelectedTaxExp($index)" ng-model="taxExmpRec.IsSelected"/>
                                                <label class="label-as-checkbox" for = "checkbox-{{$index}}"></label>
                                            </td>
                                            <td>
                                                {{taxExmpRec.SalesTaxName}}
                                            </td>
                                            <td>
                                                 {{taxExmpRec.Rate}}%
                                            </td>
                                            <td>
                                                {{taxExmpRec.Description}}
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <div ng-if="UserSettingModel.AccountTypeId" class="account-type-default">
                                    <span class="H300 default-text" >Default</span>
                                    <label class="bp-switch">
                                        <input type="checkbox" ng-checked= "UserSettingModel.AccountTypeJson.IsDefault"
                                            ng-click = "UserSettingModel.chnageDefaultFlagForAccountType(UserSettingModel.AccountTypeId,$event,UserSettingModel.AccountTypeJson.AppliesTo)" />
                                        <div class="bp-slider round" ></div>
                                    </label>
                                </div>
                                <div ng-if="UserSettingModel.AccountTypeId" class="account-type-active">
                                    <span class="H300 default-text">Active</span>
                                    <label class="bp-switch">
                                        <input type="checkbox" ng-checked= "UserSettingModel.AccountTypeJson.IsActive"
                                            ng-click = "UserSettingModel.changeActiveFlagForrAccountType(UserSettingModel.AccountTypeId,$event,UserSettingModel.AccountTypeJson.AppliesTo,UserSettingModel.AccountTypeJson.IsUpdatable)"/> <!-- ng-model="AccountingSetupModel.AddEditNewServiceJobType.IsActive"  -->
                                        <div class="bp-slider round"></div>
                                    </label>
                                </div>
                            </div>
                            <div class="button-container col-xs-12 P0">
                                <button class="link-subtle H300" ng-click = "UserSettingModel.hideAccountTypeModalWindow()">Cancel</button>
                                <button class="medium secondary" ng-click = "UserSettingModel.saveAccountType()" ng-if = "!UserSettingModel.AccountTypeId">Add</button>
                                <button class="medium secondary" ng-click = "UserSettingModel.saveAccountType()" ng-if = "UserSettingModel.AccountTypeId">Save</button>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </div>
        <div id="change-default-account-type" class="modal fade modal-container coinfirm-modal-window" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content col-xs-12 P0">
                    <div class="modal-body">
                        <header>
                            <label class="line-height-xlarge H600 M0 bp-first-letter-capitalize">Change Account type</label>
                        </header>
                        <section class="section-container">
                            <label>You are changing the default account type</label>
                            <div class="M0">
                                <label>From:</label>
                                <span>{{UserSettingModel.defaultAccountTypeList.AccountType}}</span>
                            </div>
                            <div class="M0">
                                <label>To:</label>
                                <span>{{UserSettingModel.AccountTypeJson.AccountType}}</span>
                            </div>
                            <div class="button-container col-xs-12 P0">
                                <button class="link-subtle H300" ng-click="UserSettingModel.hideCoinfirmDefaultModalWindow()">Cancel</button>
                                <button class="medium secondary" ng-click="UserSettingModel.confirmChangeDefault()">confirm</button>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </div>
    </div>
</apex:page>
